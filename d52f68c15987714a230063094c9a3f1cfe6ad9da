{
  "comments": [
    {
      "key": {
        "uuid": "8aafeb37_550091d9",
        "filename": "src/heap/cppgc/globals.h",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "nit: kKB?",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 19
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cfb372d4_4dd94e4e",
        "filename": "src/heap/cppgc/globals.h",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8aafeb37_550091d9",
      "range": {
        "startLine": 19,
        "startChar": 17,
        "endLine": 19,
        "endChar": 19
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a135c085_635dbef7",
        "filename": "src/heap/cppgc/heap.cc",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "nit: I think you can move initialization of reserved_area_ and bounded_allocator_ to the initializer list above.",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 16
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcf23557_47f3cfd5",
        "filename": "src/heap/cppgc/heap.cc",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a135c085_635dbef7",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 16
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1f32100_0d86d299",
        "filename": "src/heap/cppgc/heap.h",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "Since the order is crucial, I think it might be better to explicitly reset page_backend in the dtor and not rely on the compiler to preserve the order.",
      "range": {
        "startLine": 137,
        "startChar": 61,
        "endLine": 137,
        "endChar": 67
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9857980_73b0c356",
        "filename": "src/heap/cppgc/heap.h",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "There is no way to reset page_backend other than calling dtor (which is okay). I think it\u0027s not a problem, since the order is guaranteed by the standard.",
      "parentUuid": "d1f32100_0d86d299",
      "range": {
        "startLine": 137,
        "startChar": 61,
        "endLine": 137,
        "endChar": 67
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f325b3b6_56ae442e",
        "filename": "src/heap/cppgc/heap.h",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T14:07:29Z",
      "side": 1,
      "message": "nit: page_backend is a std::unique_ptr. What I meant is that you could call reset() on it in the Heap dtor to make sure it is destroyed before the automatic destructions at the end of the dtor.",
      "parentUuid": "e9857980_73b0c356",
      "range": {
        "startLine": 137,
        "startChar": 61,
        "endLine": 137,
        "endChar": 67
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f0d8135_4095aaf1",
        "filename": "src/heap/cppgc/heap.h",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T14:31:49Z",
      "side": 1,
      "message": "I think it\u0027s better to not mingle manual destruction with automatically generated, because other fields may require page_backend_ to be alive upon their destruction. For example, sweeper_ in the destructor waits for concurrent sweepers to finish. If page_backend_ is destroyed before, then sweepers will page fault trying to access unmapped memory.\n\nIt\u0027s generally okay if there is a dependency between members - RAII will ensure that everything is destructed in the right order.",
      "parentUuid": "f325b3b6_56ae442e",
      "range": {
        "startLine": 137,
        "startChar": 61,
        "endLine": 137,
        "endChar": 67
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a750314_b9c18cfb",
        "filename": "src/heap/cppgc/utils.cc",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "size_",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 8
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13c2bef9_233af09e",
        "filename": "src/heap/cppgc/utils.cc",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "thanks for spotting this!",
      "parentUuid": "9a750314_b9c18cfb",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 8
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9f25e68_e2439ef1",
        "filename": "src/heap/cppgc/utils.cc",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "Calling Reset in any case that is not a move from one VirtualMemory to another might result in a memory leak (since the pages will never be freed). Let\u0027s make Reset private to prevent it from happening.",
      "range": {
        "startLine": 48,
        "startChar": 20,
        "endLine": 48,
        "endChar": 25
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ff3d030_d2ac0ae5",
        "filename": "src/heap/cppgc/utils.cc",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9f25e68_e2439ef1",
      "range": {
        "startLine": 48,
        "startChar": 20,
        "endLine": 48,
        "endChar": 25
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fef56d52_e2f606e3",
        "filename": "src/heap/cppgc/utils.h",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "Represents",
      "range": {
        "startLine": 17,
        "startChar": 3,
        "endLine": 17,
        "endChar": 12
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69523636_5137f763",
        "filename": "src/heap/cppgc/utils.h",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fef56d52_e2f606e3",
      "range": {
        "startLine": 17,
        "startChar": 3,
        "endLine": 17,
        "endChar": 12
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e091960_dd67ff63",
        "filename": "src/heap/cppgc/utils.h",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2020-05-29T01:20:59Z",
      "side": 1,
      "message": "nit: Add a DCHECK in the ctor for the alignment",
      "range": {
        "startLine": 25,
        "startChar": 30,
        "endLine": 25,
        "endChar": 37
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee26ae79_d3ca87f0",
        "filename": "src/heap/cppgc/utils.h",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3e091960_dd67ff63",
      "range": {
        "startLine": 25,
        "startChar": 30,
        "endLine": 25,
        "endChar": 37
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9820397a_5ddee822",
        "filename": "src/heap/cppgc/utils.h",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1344750
      },
      "writtenOn": "2020-05-29T07:21:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3e091960_dd67ff63",
      "range": {
        "startLine": 25,
        "startChar": 30,
        "endLine": 25,
        "endChar": 37
      },
      "revId": "d52f68c15987714a230063094c9a3f1cfe6ad9da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}