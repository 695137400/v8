{
  "comments": [
    {
      "key": {
        "uuid": "25a584aa_d1cc4f43",
        "filename": "test/cctest/interpreter/test-interpreter.cc",
        "patchSetId": 1
      },
      "lineNbr": 596,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2020-03-09T18:08:55Z",
      "side": 0,
      "message": "I\u0027m wondering why these changing? the receiver should still be at the correct position in the list of arguments.",
      "revId": "79398ab09d0623100d748ef17ab618d5c0c9e6a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a286e9a9_56acd704",
        "filename": "test/cctest/interpreter/test-interpreter.cc",
        "patchSetId": 1
      },
      "lineNbr": 596,
      "author": {
        "id": 1368302
      },
      "writtenOn": "2020-03-10T13:53:08Z",
      "side": 0,
      "message": "I might have misunderstood the code, but I think the tests were simply wrong before, and it was working by chance.\n\nFor instance, the Bytecode Array generated by the test InterpreterParameter1 was\n\n         0x3d840020d6ea @    0 : 25 02             Ldar \u003cthis\u003e\n         0x3d840020d6ec @    2 : ab                Return \n\nNow is\n\n         0x5240020d6ea @    0 : 25 03             Ldar a0\n         0x5240020d6ec @    2 : ab                Return \n\nThe bytecode is executed in line 567. This line calls execution.cc::Execution::Call with receiver \u003d undefined.\n\nThe previous stack was like this:\n\n- undefined (receiver)\n- true_value (parameter 1)\n- Return Address\n\nThat means we have two parameters (including the receiver). The BytecodeArrayBuilder was constructed with a size of 1 (including the receiver), so it thinks that the receiver is the only thing in the stack. So it is the first word above the return address. The execution works by chance.\n\nNow, the stack is like this:\n\n- true_value (parameter 1)\n- undefined (receiver)\n- Return Address\n\nAgain, the BytecodeArrayBuilder thinks that the receiver is the only thing in the stack, so it reads the undefined value.\n\nTo fix the tests, we need to add one to the BytecodeArrayBuilder, and read the correct parameters instead of the receiver.",
      "parentUuid": "25a584aa_d1cc4f43",
      "revId": "79398ab09d0623100d748ef17ab618d5c0c9e6a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}