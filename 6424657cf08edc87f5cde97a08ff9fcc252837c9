{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "61e38e27_033a7ab3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1115961
      },
      "writtenOn": "2024-08-08T07:15:48Z",
      "side": 1,
      "message": "I asked around a bit and the general consensus was that this is fine.",
      "revId": "6424657cf08edc87f5cde97a08ff9fcc252837c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a6b1a16d_d6cabe1c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1472029
      },
      "writtenOn": "2024-08-08T10:01:00Z",
      "side": 1,
      "message": "I cannot give a +1 but it looks good to me, with one comment.",
      "revId": "6424657cf08edc87f5cde97a08ff9fcc252837c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a6bf6b7_370a6f65",
        "filename": "src/diagnostics/etw-jit-win.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 1472029
      },
      "writtenOn": "2024-08-08T09:44:23Z",
      "side": 1,
      "message": "Should we also avoid logging builtins when the trace session starts, in ExistingCodeLogger::LogBuiltins() / ExistingCodeLogger::LogCodeObjects() ?",
      "range": {
        "startLine": 415,
        "startChar": 2,
        "endLine": 415,
        "endChar": 64
      },
      "revId": "6424657cf08edc87f5cde97a08ff9fcc252837c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73e79453_362630c3",
        "filename": "src/diagnostics/etw-jit-win.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 1472029
      },
      "writtenOn": "2024-08-08T10:01:00Z",
      "side": 1,
      "message": "I see, `LogCodeObjects()` still ends up calling this function. \nThe only minor issue is that `GcSafeTryFindCodeForInnerPointer` does a lookup and coulb be slow. Another option might be to compare `event-\u003ecode_start`, which for builtins points to code in the text section of the executable, with the heap code space where jitted code lives.",
      "parentUuid": "7a6bf6b7_370a6f65",
      "range": {
        "startLine": 415,
        "startChar": 2,
        "endLine": 415,
        "endChar": 64
      },
      "revId": "6424657cf08edc87f5cde97a08ff9fcc252837c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9fd83944_67230e99",
        "filename": "src/diagnostics/etw-jit-win.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 1162379
      },
      "writtenOn": "2024-08-08T14:12:03Z",
      "side": 1,
      "message": "Thanks for the insightful comments, it\u0027s appreciated.\n\nhmm, it doesn\u0027t seem like the lookup table should have a huge impact, I would expect the worst of this to be from the thread synchronization in accessing the CurrentEmbeddedBlob, which it probably isn\u0027t possible to completely avoid. But, since the code object isn\u0027t really needed, it doesn\u0027t seem too bad to avoid digging up a Code object for it. I\u0027ll add that.\n\nQuestion: with regards to the LogCodeObjects thing, is this like \"make sure we do actually log this in the event where the LogExisting flag is used\"?",
      "parentUuid": "73e79453_362630c3",
      "range": {
        "startLine": 415,
        "startChar": 2,
        "endLine": 415,
        "endChar": 64
      },
      "revId": "6424657cf08edc87f5cde97a08ff9fcc252837c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eefed184_9fb0c91a",
        "filename": "src/diagnostics/etw-jit-win.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 1472029
      },
      "writtenOn": "2024-08-08T14:19:52Z",
      "side": 1,
      "message": "No, my first comment was wrong. I remembered that all existing functions are logged when a ETW tracing starts, in LogCodeObjects(), but I had not realized that even in that case we emit the events here in `EventHandler`, so your code was correctly handling that case.",
      "parentUuid": "9fd83944_67230e99",
      "range": {
        "startLine": 415,
        "startChar": 2,
        "endLine": 415,
        "endChar": 64
      },
      "revId": "6424657cf08edc87f5cde97a08ff9fcc252837c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}