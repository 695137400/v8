# Defines buckets on cr-buildbucket.appspot.com, used to schedule builds
# on buildbot. In particular, CQ uses some of these buckets to schedule tryjobs.
#
# See http://luci-config.appspot.com/schemas/projects:buildbucket.cfg for
# schema of this file and documentation.
#
# Please keep this list sorted by bucket name.

acl_sets {
  name: "waterfall"
  acls {
    role: READER
    group: "all"
  }
  acls {
    role: SCHEDULER
    group: "service-account-v8-bot"
  }
  acls {
    role: SCHEDULER
    identity: "luci-scheduler@appspot.gserviceaccount.com"
  }
  acls {
    role: SCHEDULER
    identity: "v8-ci-builder@chops-service-accounts.iam.gserviceaccount.com"
  }
  # TODO(sergiyb): Remove this after we've fully migrated to LUCI.
  acls {
    role: WRITER
    group: "service-account-v8-master"
  }
  acls {
    role: WRITER
    identity: "luci-migration@appspot.gserviceaccount.com"
  }
}

acl_sets {
  name: "tryserver"
  acls {
    role: READER
    group: "all"
  }
  acls {
    role: SCHEDULER
    group: "service-account-cq"
  }
  acls {
    role: SCHEDULER
    group: "project-v8-tryjob-access"
  }
  acls {
    role: SCHEDULER
    group: "service-account-v8-bot"
  }
  # TODO(sergiyb): Remove this after we've fully migrated to LUCI.
  acls {
    role: WRITER
    group: "service-account-v8-master"
  }
  acls {
    role: WRITER
    identity: "luci-migration@appspot.gserviceaccount.com"
  }
}

builder_mixins {
  name: "linux64"
  dimensions: "cpu:x86-64"
  dimensions: "os:Ubuntu-14.04"
}

builder_mixins {
  name: "win64"
  dimensions: "cpu:x86-64"
  dimensions: "os:Windows"
}

builder_mixins {
  name: "mac64"
  dimensions: "cpu:x86-64"
  dimensions: "os:Mac-10.12"
}

builder_mixins {
  name: "try-multibot"
  dimensions: "pool:luci.v8.try.multibot"
  execution_timeout_secs: 3600
}

builder_mixins {
  name: "ci-multibot"
  dimensions: "pool:luci.v8.ci.multibot"
  mixins: "linux64"
}

builder_mixins {
  name: "master-client-v8"
  recipe {
    properties: "mastername:client.v8"
  }
}

builder_mixins {
  name: "master-client-v8-ports"
  recipe {
    properties: "mastername:client.v8.ports"
  }
}

builder_mixins {
  name: "master-client-v8-fyi"
  recipe {
    properties: "mastername:client.v8.fyi"
  }
}

builder_mixins {
  name: "master-client-v8-clusterfuzz"
  recipe {
    properties: "mastername:client.v8.clusterfuzz"
  }
}

builder_mixins {
  name: "master-client-v8-chromium"
  recipe {
    properties: "mastername:client.v8.chromium"
  }
}

builder_mixins {
  name: "master-client-v8-branches"
  recipe {
    properties: "mastername:client.v8.branches"
  }
}

builder_mixins {
  name: "master-client-v8-official"
  recipe {
    properties: "mastername:client.v8.official"
  }
}

builder_mixins {
  name: "recipe-chromium"
  recipe {
    name: "chromium"
  }
}

builder_mixins {
  name: "recipe-lkgr-finder"
  recipe {
    cipd_package: "infra/recipe_bundles/chromium.googlesource.com/infra/infra"
    cipd_version: "refs/heads/master"
    name: "lkgr_finder"
    properties: "lkgr_project:v8"
    properties_j: "allowed_lag:4"
  }
}

builder_mixins {
  name: "recipe-v8-archive"
  recipe {
    name: "v8/archive"
  }
}

builder_mixins {
  name: "recipe-v8-auto-tag"
  recipe {
    name: "v8/auto_tag"
  }
}

builder_mixins {
  name: "recipe-v8-auto-roll-push"
  recipe {
    name: "v8/auto_roll_push"
  }
}

builder_mixins {
  name: "recipe-v8-auto-roll-deps"
  recipe {
    name: "v8/auto_roll_deps"
  }
}

builder_mixins {
  name: "recipe-v8-auto-roll-v8-deps"
  recipe {
    name: "v8/auto_roll_v8_deps"
  }
}

builder_mixins {
  name: "recipe-v8-auto-roll-release-process"
  recipe {
    name: "v8/auto_roll_release_process"
  }
}

builder_mixins {
  name: "recipe-blink-downstream"
  recipe {
    name: "blink_downstream"
  }
}

builder_mixins {
  name: "recipe-v8-node-integration"
  recipe {
    name: "v8/node_integration"
  }
}

builder_mixins {
  name: "recipe-android-builder"
  recipe {
    name: "android/builder"
  }
}

builder_mixins {
  name: "autoroll-service-account"
  service_account: "v8-ci-autoroll-builder@chops-service-accounts.iam.gserviceaccount.com"
}

# Recipe configuration mixins.

# Build config.

builder_mixins {
  name: "release"
  recipe {
    properties: "build_config:Release"
  }
}

builder_mixins {
  name: "debug"
  recipe {
    properties: "build_config:Debug"
  }
}

# Target architecture. Not specifying target_arch defaults to intel.

builder_mixins {
  name: "arm"
  recipe {
    properties: "target_arch:arm"
  }
}

builder_mixins {
  name: "mips"
  recipe {
    properties: "target_arch:mips"
  }
}

# Target platform.

builder_mixins {
  name: "android"
  recipe {
    properties: "target_platform:android"
  }
}

builder_mixins {
  name: "fuchsia"
  recipe {
    properties: "target_platform:fuchsia"
  }
}

builder_mixins {
  name: "download-gcmole"
  recipe {
    properties: "set_gclient_var:download_gcmole"
  }
}

# Gclient variables.

builder_mixins {
  name: "download-jsfunfuzz"
  recipe {
    properties: "set_gclient_var:download_jsfunfuzz"
  }
}

builder_mixins {
  name: "download-mips-toolchain"
  recipe {
    properties: "set_gclient_var:download_mips_toolchain"
  }
}

builder_mixins {
  name: "checkout-instrumented-libraries"
  recipe {
    properties: "set_gclient_var:checkout_instrumented_libraries"
  }
}

buckets {
  name: "luci.v8.ci"
  acl_sets: "waterfall"

  swarming {
    hostname: "chromium-swarm.appspot.com"
    builder_defaults: {
      service_account: "v8-ci-builder@chops-service-accounts.iam.gserviceaccount.com"
      execution_timeout_secs: 7200  # 2 hours
      swarming_tags: "vpython:native-python-wrapper"
      luci_migration_host: "luci-migration.appspot.com"
      recipe {
        cipd_package: "infra/recipe_bundles/chromium.googlesource.com/chromium/tools/build"
        cipd_version: "refs/heads/master"
        name: "v8"
      }

      # Most of our builders require build numbers. Varios reasons include:
      #  - perf_dashboard recipe requires build numbers
      #  - v8 recipe requires build numbers, crbug.com/826399
      #  - chromium_tests recipe module uses build numbers
      build_numbers: YES
    }

    # Console: Main

    builders {
      name: "V8 Linux - builder"
      mixins: "master-client-v8"
      mixins: "linux64"
      mixins: "download-gcmole"
    }

    builders {
      name: "V8 Linux - debug builder"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - nosnap builder"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - nosnap debug builder"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - presubmit"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - debug"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - shared"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - nosnap"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - nosnap - debug"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - noi18n - debug"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - verify csa"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - builder"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - debug builder"
      mixins: "master-client-v8"
      mixins: "linux64"
      mixins: "download-jsfunfuzz"
    }

    builders {
      name: "V8 Linux64 - custom snapshot - debug builder"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux64 - internal snapshot"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - debug"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux64 - custom snapshot - debug"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux64 - verify csa"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 Jumbo"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 Jumbo - debug"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 Jumbo - limited"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 Jumbo - limited - debug"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Fuchsia"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Fuchsia - debug"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Win32 - builder"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Win32 - debug builder"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Win32"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Win32 - nosnap - shared"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Win32 - debug"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Win64"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Win64 - debug"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Win64 - msvc"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Mac64"
      mixins: "master-client-v8"
      mixins: "mac64"
    }

    builders {
      name: "V8 Mac64 - debug"
      mixins: "master-client-v8"
      mixins: "mac64"
    }

    builders {
      name: "V8 Linux - gc stress"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux64 GC Stress - custom snapshot"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Mac64 GC Stress"
      mixins: "master-client-v8"
      mixins: "mac64"
    }

    builders {
      name: "V8 Linux64 ASAN"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 TSAN"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 TSAN - concurrent marking"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - arm64 - sim - MSAN"
      mixins: "master-client-v8"
      mixins: "linux64"
      mixins: "checkout-instrumented-libraries"
    }

    builders {
      name: "V8 Mac64 ASAN"
      mixins: "master-client-v8"
      mixins: "mac64"
    }

    builders {
      name: "V8 Win64 ASAN"
      mixins: "master-client-v8"
      mixins: "win64"
    }

    builders {
      name: "V8 Fuzzer"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux gcc 4.8"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 gcc 4.8 - debug"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - cfi"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 UBSan"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 UBSanVptr"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - fyi"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux64 - debug - fyi"
      mixins: "master-client-v8"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - vtunejit"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - gcov coverage"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - predictable"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - full debug"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - interpreted regexp"
      mixins: "master-client-v8"
      mixins: "linux64"
    }

    # Console: Ports

    builders {
      name: "V8 Arm - builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Arm - debug builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Android Arm - builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - arm - sim"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - arm - sim - debug"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Arm"
      mixins: "master-client-v8-ports"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Arm - debug"
      mixins: "master-client-v8-ports"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Arm GC Stress"
      mixins: "master-client-v8-ports"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Android Arm64 - builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - arm64 - sim"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - arm64 - sim - debug"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - arm64 - sim - gc stress"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Mips - builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
      mixins: "download-mips-toolchain"
    }

    builders {
      name: "V8 Linux - mipsel - sim - builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - mips64el - sim - builder"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Mips - big endian - nosnap"
      execution_timeout_secs: 19800  # 5.5 hours
      mixins: "master-client-v8-ports"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - mipsel - sim"
      mixins: "master-client-v8-ports"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - mips64el - sim"
      mixins: "master-client-v8-ports"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 Linux - ppc - sim"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - ppc64 - sim"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - s390 - sim"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - s390x - sim"
      mixins: "master-client-v8-ports"
      mixins: "linux64"
    }

    # Console: FYI

    builders {
      name: "V8 lkgr finder"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "autoroll-service-account"
      mixins: "recipe-lkgr-finder"
    }

    builders {
      name: "Auto-roll - push"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "autoroll-service-account"
      mixins: "recipe-v8-auto-roll-push"
    }

    builders {
      name: "Auto-roll - deps"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "autoroll-service-account"
      mixins: "recipe-v8-auto-roll-deps"
    }

    builders {
      name: "Auto-roll - v8 deps"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "autoroll-service-account"
      mixins: "recipe-v8-auto-roll-v8-deps"
    }

    builders {
      name: "Auto-roll - test262"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "autoroll-service-account"
      mixins: "recipe-v8-auto-roll-v8-deps"
    }

    builders {
      name: "Auto-roll - release process"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "autoroll-service-account"
      mixins: "recipe-v8-auto-roll-release-process"
    }

    builders {
      name: "V8-Blink Win"
      mixins: "master-client-v8-fyi"
      mixins: "win64"
      mixins: "recipe-blink-downstream"
    }

    builders {
      name: "V8-Blink Mac"
      execution_timeout_secs: 10800  # 3 hours
      mixins: "master-client-v8-fyi"
      mixins: "mac64"
      mixins: "recipe-blink-downstream"
    }

    builders {
      name: "V8-Blink Linux 64"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-blink-downstream"
    }

    builders {
      name: "V8-Blink Linux 64 - future"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-blink-downstream"
    }

    builders {
      name: "V8-Blink Linux 64 (dbg)"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-blink-downstream"
    }

    builders {
      name: "Linux Debug Builder"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
      dimensions: "pool:luci.v8.ci.largedisk"
      recipe {
        properties_j: "triggers:[\"cr_linux_dbg\"]"
      }
    }

    builders {
      name: "V8 Linux GN"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "V8 Android GN (dbg)"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Linux ASAN Builder"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
      dimensions: "pool:luci.v8.ci.largedisk"
    }

    builders {
      name: "Android Builder"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-android-builder"
      dimensions: "pool:luci.v8.ci.largedisk"
    }

    builders {
      name: "Linux Snapshot Builder"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Linux Tests (dbg)(1)"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Win V8 FYI Release (NVIDIA)"
      mixins: "master-client-v8-fyi"
      mixins: "win64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Mac V8 FYI Release (Intel)"
      mixins: "master-client-v8-fyi"
      mixins: "mac64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Linux V8 FYI Release (NVIDIA)"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Linux V8 FYI Release - concurrent marking (NVIDIA)"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Android V8 FYI Release (Nexus 5X)"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "V8 Linux64 - node.js baseline"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-v8-node-integration"
    }

    builders {
      name: "V8 Win64 - node.js baseline"
      mixins: "master-client-v8-fyi"
      mixins: "win64"
      mixins: "recipe-v8-node-integration"
    }

    builders {
      name: "V8 Mac64 - node.js baseline"
      mixins: "master-client-v8-fyi"
      mixins: "mac64"
      mixins: "recipe-v8-node-integration"
    }

    builders {
      name: "V8 Linux64 - node.js integration"
      mixins: "master-client-v8-fyi"
      mixins: "linux64"
      mixins: "recipe-v8-node-integration"
    }

    builders {
      name: "V8 Win64 - node.js integration"
      mixins: "master-client-v8-fyi"
      mixins: "win64"
      mixins: "recipe-v8-node-integration"
    }

    builders {
      name: "V8 Mac64 - node.js integration"
      mixins: "master-client-v8-fyi"
      mixins: "mac64"
      mixins: "recipe-v8-node-integration"
    }

    # Console: ClusterFuzz

    builders {
      name: "V8 Clusterfuzz Win64 ASAN - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "win64"
    }

    builders {
      name: "V8 Clusterfuzz Win64 ASAN - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "win64"
    }

    builders {
      name: "V8 Clusterfuzz Mac64 ASAN - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "mac64"
    }

    builders {
      name: "V8 Clusterfuzz Mac64 ASAN - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "mac64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 - nosnap release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 - nosnap debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 ASAN no inline - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 ASAN - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 ASAN arm64 - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux ASAN arm - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux ASAN mipsel - debug builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux MSAN no origins"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
      mixins: "checkout-instrumented-libraries"
    }

    builders {
      name: "V8 Clusterfuzz Linux MSAN chained origins"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
      mixins: "checkout-instrumented-libraries"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 CFI - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 TSAN - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 Clusterfuzz Linux64 UBSanVptr - release builder"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "linux64"
    }

    builders {
      name: "V8 NumFuzz"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 NumFuzz - debug"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 NumFuzz - TSAN"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 NumFuzz - nosnap"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "ci-multibot"
    }

    builders {
      name: "V8 NumFuzz - nosnap debug"
      mixins: "master-client-v8-clusterfuzz"
      mixins: "ci-multibot"
    }

    # Console: Chromium

    builders {
      name: "Linux - Future"
      mixins: "master-client-v8-chromium"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Linux - Future (dbg)"
      mixins: "master-client-v8-chromium"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    builders {
      name: "Linux V8 API Stability"
      mixins: "master-client-v8-chromium"
      mixins: "linux64"
      mixins: "recipe-chromium"
    }

    # Console: Branches

    builders {
      name: "V8 Linux - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - stable branch - debug"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - stable branch - debug"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 arm - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 arm - sim - stable branch - debug"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 mipsel - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 mips64el - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 ppc - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 ppc64 - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 s390 - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 s390x - sim - stable branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux - beta branch - debug"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 Linux64 - beta branch - debug"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 arm - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 arm - sim - beta branch - debug"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 mipsel - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 mips64el - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 ppc - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 ppc64 - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 s390 - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "V8 s390x - sim - beta branch"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
    }

    builders {
      name: "Auto-tag"
      mixins: "master-client-v8-branches"
      mixins: "linux64"
      mixins: "recipe-v8-auto-tag"
    }

    # Console: Official

    builders {
      name: "V8 Official Arm32"
      mixins: "master-client-v8-official"
      mixins: "linux64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Android Arm32"
      mixins: "master-client-v8-official"
      mixins: "linux64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Android Arm64"
      mixins: "master-client-v8-official"
      mixins: "linux64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Linux32"
      mixins: "master-client-v8-official"
      mixins: "linux64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Linux64"
      mixins: "master-client-v8-official"
      mixins: "linux64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Win32"
      mixins: "master-client-v8-official"
      mixins: "win64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Win64"
      mixins: "master-client-v8-official"
      mixins: "win64"
      mixins: "recipe-v8-archive"
    }

    builders {
      name: "V8 Official Mac64"
      mixins: "master-client-v8-official"
      mixins: "mac64"
      mixins: "recipe-v8-archive"
    }
  }
}

buckets {
  name: "luci.v8.try"
  acl_sets: "tryserver"

  swarming {
    hostname: "chromium-swarm.appspot.com"
    builder_defaults: {
      dimensions: "pool:luci.v8.try"
      dimensions: "os:Ubuntu-14.04"
      service_account: "v8-try-builder@chops-service-accounts.iam.gserviceaccount.com"
      execution_timeout_secs: 1800  # 30 min
      swarming_tags: "vpython:native-python-wrapper"
      recipe {
        cipd_package: "infra/recipe_bundles/chromium.googlesource.com/chromium/tools/build"
        cipd_version: "refs/heads/master"
        name: "v8"
        properties: "mastername:tryserver.v8"
      }
    }

    # When adding builders here, please also add them to the 'tryserver' console
    # in luci-milo.cfg.
    builders {
      name: "v8_linux_gc_stress_dbg"
      execution_timeout_secs: 3600
      mixins: "debug"
    }

    builders {
      name: "v8_linux_nosnap_rel"
      execution_timeout_secs: 3600
      mixins: "release"
    }

    builders {
      name: "v8_linux_nosnap_dbg"
      execution_timeout_secs: 3600
      mixins: "debug"
    }

    builders {
      name: "v8_linux_gcc_compile_rel"
      mixins: "release"
    }

    builders {
      name: "v8_linux_gcc_rel"
      mixins: "release"
    }

    builders {
      name: "v8_linux_shared_compile_rel"
      mixins: "release"
    }

    builders {
      name: "v8_linux64_gcc_compile_dbg"
      mixins: "debug"
    }

    builders {
      name: "v8_linux64_jumbo_compile_rel"
      mixins: "release"
    }

    builders {
      name: "v8_linux64_jumbo_limited_compile_rel"
      mixins: "release"
    }

    builders {
      name: "v8_linux64_msan_rel"
      execution_timeout_secs: 3600
      mixins: "checkout-instrumented-libraries"
      mixins: "release"
    }

    builders {
      name: "v8_linux64_sanitizer_coverage_rel"
      execution_timeout_secs: 3600
      mixins: "release"
    }

    builders {
      name: "v8_linux64_tsan_rel"
      execution_timeout_secs: 3600
      mixins: "release"
    }

    builders {
      name: "v8_linux_arm_dbg"
      execution_timeout_secs: 3600
      mixins: "debug"
    }

    builders {
      name: "v8_linux_arm64_dbg"
      execution_timeout_secs: 3600
      mixins: "debug"
    }

    builders {
      name: "v8_linux_arm64_gc_stress_dbg"
      execution_timeout_secs: 3600
      mixins: "debug"
    }

    builders {
      name: "v8_linux_mipsel_compile_rel"
      mixins: "release"
    }

    builders {
      name: "v8_linux_mips64el_compile_rel"
      mixins: "release"
    }

    builders {
      name: "v8_mips_compile_rel"
      mixins: "download-mips-toolchain"
      mixins: "mips"
      mixins: "release"
    }

    builders {
      name: "v8_android_arm_compile_rel"
      mixins: "android"
      mixins: "arm"
      mixins: "release"
    }

    builders {
      name: "v8_mac64_asan_rel"
      execution_timeout_secs: 3600
      dimensions: "os:Mac-10.12"
      mixins: "release"
    }

    builders {
      name: "v8_mac64_gc_stress_dbg"
      execution_timeout_secs: 3600
      dimensions: "os:Mac-10.12"
      mixins: "debug"
    }

    builders {
      name: "v8_node_linux64_rel"
      # TODO(sergiyb): Remove after resolving https://crbug.com/v8/7620.
      execution_timeout_secs: 2400  # 40 min
      mixins: "recipe-v8-node-integration"
    }

    builders {
      name: "v8_presubmit"
      priority: 25
      execution_timeout_secs: 600  # 10 min
      recipe {
        name: "run_presubmit"
        properties: "repo_name:v8"
        properties_j: "runhooks:true"
      }
    }

    builders {
      name: "v8_win_compile_dbg"
      dimensions: "os:Windows-7-SP1"
      mixins: "debug"
    }

    builders {
      name: "v8_win_dbg"
      execution_timeout_secs: 3600
      dimensions: "os:Windows-7-SP1"
      mixins: "debug"
    }

    builders {
      name: "v8_win64_dbg"
      execution_timeout_secs: 3600
      dimensions: "os:Windows-7-SP1"
      mixins: "debug"
    }

    builders {
      name: "v8_win64_msvc_compile_rel"
      dimensions: "os:Windows-7-SP1"
      mixins: "release"
    }

    builders {
      name: "v8_linux_chromium_gn_rel"
      execution_timeout_secs: 3600
      build_numbers: YES  # chromium_trybot recipe requires build numbers
      recipe {
        name: "chromium_trybot"
      }
    }

    builders {
      name: "v8_linux_blink_rel"
      execution_timeout_secs: 3600
      dimensions: "pool:luci.v8.try.baremetal"
      build_numbers: YES  # chromium_trybot recipe requires build numbers
      recipe {
        name: "chromium_trybot"
      }
    }

    # Builders triggering other builds (see triggered builders below).
    builders {
      name: "v8_fuchsia_rel_ng"
      mixins: "fuchsia"
      mixins: "release"
    }

    builders {
      name: "v8_linux64_asan_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux64_asan_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux64_cfi_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux64_cfi_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux64_dbg_ng"
      mixins: "debug"
      recipe {
        properties_j: "triggers:[\"v8_linux64_dbg_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux64_fyi_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux64_fyi_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux64_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux64_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux64_ubsan_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux64_ubsan_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux64_verify_csa_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux64_verify_csa_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_arm64_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux_arm64_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_arm_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux_arm_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_dbg_ng"
      mixins: "debug"
      recipe {
        properties_j: "triggers:[\"v8_linux_dbg_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_nodcheck_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux_nodcheck_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_noi18n_rel_ng"
      execution_timeout_secs: 3600
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux_noi18n_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_rel_ng"
      mixins: "download-gcmole"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_linux_verify_csa_rel_ng"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_linux_verify_csa_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_mac64_rel_ng"
      dimensions: "os:Mac-10.12"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_mac64_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_mac64_dbg_ng"
      dimensions: "os:Mac-10.12"
      mixins: "debug"
      recipe {
        properties_j: "triggers:[\"v8_mac64_dbg_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_win64_asan_rel_ng"
      execution_timeout_secs: 3600
      dimensions: "os:Windows-7-SP1"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_win64_asan_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_win64_msvc_rel_ng"
      dimensions: "os:Windows-7-SP1"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_win64_msvc_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_win64_rel_ng"
      dimensions: "os:Windows-7-SP1"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_win64_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_win_nosnap_shared_rel_ng"
      dimensions: "os:Windows-7-SP1"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_win_nosnap_shared_rel_ng_triggered\"]"
      }
    }

    builders {
      name: "v8_win_rel_ng"
      dimensions: "os:Windows-7-SP1"
      mixins: "release"
      recipe {
        properties_j: "triggers:[\"v8_win_rel_ng_triggered\"]"
      }
    }

    # Builders that run builds triggered by other builders (see above). We run
    # them on swarming multibots because they just trigger other swarming tasks
    # and do not require a lot of resources.
    builders {
      name: "v8_linux64_dbg_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux64_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux64_ubsan_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux64_verify_csa_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_arm64_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_arm_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_dbg_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_nodcheck_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_noi18n_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_win64_asan_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_win64_msvc_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_win64_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_mac64_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_mac64_dbg_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux_verify_csa_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_win_nosnap_shared_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_win_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux64_asan_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux64_cfi_rel_ng_triggered"
      mixins: "try-multibot"
    }

    builders {
      name: "v8_linux64_fyi_rel_ng_triggered"
      mixins: "try-multibot"
    }
  }
}

buckets {
  name: "master.client.v8"
  acl_sets: "waterfall"
}

buckets {
  name: "master.client.v8.branches"
  acl_sets: "waterfall"
}

buckets {
  name: "master.client.v8.chromium"
  acl_sets: "waterfall"
}

buckets {
  name: "master.client.v8.clusterfuzz"
  acl_sets: "waterfall"
}

buckets {
  name: "master.client.v8.fyi"
  acl_sets: "waterfall"
}

buckets {
  name: "master.client.v8.official"
  acl_sets: "waterfall"
}

buckets {
  name: "master.client.v8.ports"
  acl_sets: "waterfall"
}
