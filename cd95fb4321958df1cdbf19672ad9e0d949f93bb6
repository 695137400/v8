{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0ddbd4cb_15ee54d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1249724
      },
      "writtenOn": "2021-08-16T22:56:03Z",
      "side": 1,
      "message": "Toon, saw parser-base.h recently and though of doing a similar thing to change SharedTurboAssembler, ptal, thanks!",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "81154bd9_c6aca9dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1184114
      },
      "writtenOn": "2021-08-17T12:08:24Z",
      "side": 1,
      "message": "Nice! If you pull this through to the TurboAssemblerBase we can avoid a few more virtual methods.\n\nI hope this header isn\u0027t too widely (indirectly) included though? Otherwise it would still be better to keep the implementations in cpp files.",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c408406_19626cf6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1249724
      },
      "writtenOn": "2021-08-17T21:12:30Z",
      "side": 1,
      "message": "I couldn\u0027t figure out how to keep it inside the cpp file due to https://isocpp.org/wiki/faq/templates#separate-template-class-defn-from-decl, was getting linker errors, and so moved everything into the .h file. This header is only be included by macro-assembler-ia32.h and macro-assembler-x64.h, so it should cause too much code bloat.",
      "parentUuid": "81154bd9_c6aca9dd",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03a10201_46e7dceb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1184114
      },
      "writtenOn": "2021-08-18T14:28:29Z",
      "side": 1,
      "message": "Right, I was thinking about the alternative solution suggested there. If it seems reasonable that\u0027s fine by me though. The parser is just slightly nicer isolated from the rest of the system than the macro-assembler files.",
      "parentUuid": "9c408406_19626cf6",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "184da46e_93cf3830",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1249724
      },
      "writtenOn": "2021-08-18T16:03:44Z",
      "side": 1,
      "message": "This solution: \"template class Foo\u003cint\u003e;\"?\nI can try that, I wouldn\u0027t be able to add that to shared-macro-assembler-shared-ia32-x64.cc, but I can probably add it to macro-assembler-ia32.cc and macro-assembler-x64. Let me see if I can do that, otherwise I\u0027ll keep it in the header.",
      "parentUuid": "03a10201_46e7dceb",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "966a6257_aa95bb02",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1249724
      },
      "writtenOn": "2021-08-19T23:29:08Z",
      "side": 1,
      "message": "Yea, it doesn\u0027t work. I would need `template class SharedTurboAssembler\u003cTurboAssembler\u003e` in macro-assembler-shared-ia32-x64.cc, but TurboAssembler is not defined at that point. Explicitly instantiating the SharedTurboAssembler class anywhere else doesn\u0027t work, since we won\u0027t have the definitions of the member functions anywhere but in macro-assembler-shared-ia32-x64.cc.",
      "parentUuid": "184da46e_93cf3830",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "abd33cba_24ffd744",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1184114
      },
      "writtenOn": "2021-08-20T09:52:41Z",
      "side": 1,
      "message": "Oh well, thanks for trying anyway :)\n\n2 other options could be:\n- try to generalise the subtleties between the 2 assemblers so there\u0027s no diff\n- a clearer separation between the CRTP bit and the shared superclass through delegation; similar to the classes in elements.h/.cc.\n\nbut I wouldn\u0027t be surprised if it ends up more messy. I\u0027m fine with the current design too (hence the +1).",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a404090e_7c5c253a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1249724
      },
      "writtenOn": "2021-08-20T18:20:03Z",
      "side": 1,
      "message": "Thanks for the suggestions! In the latest PS, I added a class template to the inheritance hierarchy, instead of changing the current base class. Functionally nothing changes, but we are able to keep the cc file and function definition out of the header, let me know what you think.",
      "parentUuid": "abd33cba_24ffd744",
      "revId": "cd95fb4321958df1cdbf19672ad9e0d949f93bb6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}