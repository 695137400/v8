{
  "comments": [
    {
      "key": {
        "uuid": "0a29b74f_4305702c",
        "filename": "include/v8-platform.h",
        "patchSetId": 2
      },
      "lineNbr": 307,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2018-05-07T06:50:01Z",
      "side": 0,
      "message": "V8_DEPRECATE_SOON is not sufficient for removing.\n\nIt should be V8_DEPRECATED for one release before we can remove it:\nhttps://github.com/v8/v8/wiki/How-to-change-V8-public-API",
      "range": {
        "startLine": 307,
        "startChar": 2,
        "endLine": 307,
        "endChar": 19
      },
      "revId": "7d57be43a1553e44daf5f01e8981f0824cdc3ca2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22395f52_b8026740",
        "filename": "include/v8-platform.h",
        "patchSetId": 2
      },
      "lineNbr": 307,
      "author": {
        "id": 1001534
      },
      "writtenOn": "2018-05-07T16:12:42Z",
      "side": 0,
      "message": "The reason I used V8_DEPRECATE_SOON is that v8 wouldn\u0027t compile when the new APIs redirected to the old APIs by default if those were marked V8_DEPRECATED.\n\ni.e.\n\n  virtual int NumberOfWorkerThreads() {\n    return static_cast\u003cint\u003e(NumberOfAvailableBackgroundThreads());\n  }\n\nwould complain if NumberOfAvailableBackgroundThreads() is marked V8_DEPRECATED.\n\nHence, the minimum this CL can do is make the new ones pure-virtual and mark the old ones V8_DEPRECATED for realz.\n\nBut then embedders will fail to compile if they have yet to switch anyways (because of the pure-virtual calls).\nAnd I can\u0027t imagine it makes any sense for any embedder to fix their compilation per new pure-virtuals but not stop overriding old APIs.\n\nAs such I don\u0027t think going to V8_DEPRECATED has any value here.",
      "parentUuid": "0a29b74f_4305702c",
      "range": {
        "startLine": 307,
        "startChar": 2,
        "endLine": 307,
        "endChar": 19
      },
      "revId": "7d57be43a1553e44daf5f01e8981f0824cdc3ca2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1705223_dfb2f797",
        "filename": "include/v8-platform.h",
        "patchSetId": 2
      },
      "lineNbr": 307,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2018-05-07T16:40:16Z",
      "side": 0,
      "message": "Can we turn that around? \n\nV8_DEPRECATED(\"\", virtual size_t NumberOfAvailableBackgroundThreads()) {\n   return static_cast\u003csize_t\u003e(NumberOfWorkerThreads());\n});\n\n\u003e As such I don\u0027t think going to V8_DEPRECATED has any value here.\n\nThe embedders should get a compile warning when running with v8_deprecation_warnings \u003d true, so that they can fix their before the next V8 release.",
      "parentUuid": "22395f52_b8026740",
      "range": {
        "startLine": 307,
        "startChar": 2,
        "endLine": 307,
        "endChar": 19
      },
      "revId": "7d57be43a1553e44daf5f01e8981f0824cdc3ca2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44c3708d_101767f4",
        "filename": "include/v8-platform.h",
        "patchSetId": 2
      },
      "lineNbr": 307,
      "author": {
        "id": 1001534
      },
      "writtenOn": "2018-05-07T17:11:11Z",
      "side": 0,
      "message": "But then we still need to make NumberOfWorkerThreads() pure-virtual and they\u0027ll get a compile error regardless.\n\n(well NumberOfWorkerThreads() is a bad example because there\u0027s an easy default but there isn\u0027t for other APIs affected here, basically the problem is they already provide an impl and we want them to point it at the new API, not silently drop their impl)\n\nFWIW, making long-standing \"new\" methods like GetForegroundTaskRunner() pure-virtual has the same problem. It will not compile the minute they sync even though no macro warned them that they had to implement it.",
      "parentUuid": "e1705223_dfb2f797",
      "range": {
        "startLine": 307,
        "startChar": 2,
        "endLine": 307,
        "endChar": 19
      },
      "revId": "7d57be43a1553e44daf5f01e8981f0824cdc3ca2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}