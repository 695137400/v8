{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "26101602_f1559d03",
        "filename": "/COMMIT_MSG",
        "patchSetId": 39
      },
      "lineNbr": 17,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "There\u0027s unittests for dropping in https://source.chromium.org/chromium/chromium/src/+/main:v8/test/unittests/heap/global-handles-unittest.cc",
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c7599e97_b3d911cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 39
      },
      "lineNbr": 17,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "Added some unittests now, but under `unified-heap-unittest.cc` since without a unified heap GC we don\u0027t use the visitor and don\u0027t reach the weakness checks.",
      "parentUuid": "26101602_f1559d03",
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9cbd6c1b_c27e3f1c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 39
      },
      "lineNbr": 0,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "Did you run regular benchmarks as well? How does GC time look like on v8.browsing? If this regresses we need to think about puting this behind memory reducing GCs already now.",
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5fed845c_246759e2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 39
      },
      "lineNbr": 0,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "Haven\u0027t yet. I\u0027m running it now: https://pinpoint-dot-chromeperf.appspot.com/job/15de580a760000",
      "parentUuid": "9cbd6c1b_c27e3f1c",
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b02812e_61e123be",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 39
      },
      "lineNbr": 0,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T17:58:50Z",
      "side": 1,
      "message": "Results are inconclusive imo.\nI ran facebook (https://pinpoint-dot-chromeperf.appspot.com/job/17fe2b93760000) and cnn (https://pinpoint-dot-chromeperf.appspot.com/job/12a5f92a760000). GC time on facebook improves and on cnn it regresses.\nThe overall story durations also regress.",
      "parentUuid": "5fed845c_246759e2",
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a6853d2_9ab4d074",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 925,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "Can you land the change that turns around weakness and root separately? Code looks good but since there were issues in the past with this flag I think it makes sense to land separately.",
      "range": {
        "startLine": 925,
        "startChar": 5,
        "endLine": 925,
        "endChar": 34
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0303a3fe_cdfff246",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 925,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "crrev.com/c/4993367",
      "parentUuid": "1a6853d2_9ab4d074",
      "range": {
        "startLine": 925,
        "startChar": 5,
        "endLine": 925,
        "endChar": 34
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "555c7e3d_7ca71cb5",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 963,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "I really don\u0027t like this parameter here. We should not have GC-dependent processing inside this area.",
      "range": {
        "startLine": 963,
        "startChar": 21,
        "endLine": 963,
        "endChar": 38
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86aaba8d_f13f35c9",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 963,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "It\u0027s only really needed for DCHECKs. We can drop the checks if you prefer.",
      "parentUuid": "555c7e3d_7ca71cb5",
      "range": {
        "startLine": 963,
        "startChar": 21,
        "endLine": 963,
        "endChar": 38
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd8403c5_e16ac90f",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 963,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-11-28T14:29:59Z",
      "side": 1,
      "message": "This is gone now.",
      "parentUuid": "86aaba8d_f13f35c9",
      "range": {
        "startLine": 963,
        "startChar": 21,
        "endLine": 963,
        "endChar": 38
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3f26f17_c0fce375",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 975,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "Can you land this and the related changes separately?",
      "range": {
        "startLine": 975,
        "startChar": 14,
        "endLine": 975,
        "endChar": 34
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1d8cafe1_ef65a384",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 975,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "crrev.com/c/4992104",
      "parentUuid": "c3f26f17_c0fce375",
      "range": {
        "startLine": 975,
        "startChar": 14,
        "endLine": 975,
        "endChar": 34
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02be3dbe_c60ec67b",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1181,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "TryMarkObject",
      "range": {
        "startLine": 1181,
        "startChar": 32,
        "endLine": 1181,
        "endChar": 42
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b3cd49e7_00a1b716",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1181,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "02be3dbe_c60ec67b",
      "range": {
        "startLine": 1181,
        "startChar": 32,
        "endLine": 1181,
        "endChar": 42
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f040655_5b5901f5",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1185,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "Since you are here: Let\u0027s add braces. (also below)",
      "range": {
        "startLine": 1185,
        "startChar": 4,
        "endLine": 1185,
        "endChar": 10
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "54f15a73_0644cf66",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1185,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4f040655_5b5901f5",
      "range": {
        "startLine": 1185,
        "startChar": 4,
        "endLine": 1185,
        "endChar": 10
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0874ceb1_33c244c3",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1197,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "TryMark",
      "range": {
        "startLine": 1197,
        "startChar": 47,
        "endLine": 1197,
        "endChar": 51
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2e4af0d6_5321d4a7",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1197,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0874ceb1_33c244c3",
      "range": {
        "startLine": 1197,
        "startChar": 47,
        "endLine": 1197,
        "endChar": 51
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "019fb825_0e275543",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1226,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "IsWeakForYoungGenGC()?",
      "range": {
        "startLine": 1226,
        "startChar": 20,
        "endLine": 1226,
        "endChar": 26
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a998a4ce_9c996eab",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1226,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "This one is used for full GCs as well.",
      "parentUuid": "019fb825_0e275543",
      "range": {
        "startLine": 1226,
        "startChar": 20,
        "endLine": 1226,
        "endChar": 26
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cb1ec8f8_20cfaa04",
        "filename": "src/handles/traced-handles.cc",
        "patchSetId": 39
      },
      "lineNbr": 1226,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-11-23T10:52:48Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "a998a4ce_9c996eab",
      "range": {
        "startLine": 1226,
        "startChar": 20,
        "endLine": 1226,
        "endChar": 26
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56929127_55d6f461",
        "filename": "src/heap/cppgc-js/cpp-heap.cc",
        "patchSetId": 39
      },
      "lineNbr": 820,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "Should this go into `EnterFinalPause`? We only do this once, right?",
      "range": {
        "startLine": 820,
        "startChar": 37,
        "endLine": 820,
        "endChar": 64
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcc35110_aa0f72ea",
        "filename": "src/heap/cppgc-js/cpp-heap.cc",
        "patchSetId": 39
      },
      "lineNbr": 820,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "No, we do it on every iteration. The background markers always use the concurrent version and push to the worklist, so the main thread needs to empty that worklist as long as parallel marking is on-going.\nI had a version where I set an atomic flag to denote that we\u0027re in the atomic pause and then the background markers could stop pushing to the worklist, but it was more complicated and wasn\u0027t any better in terms of benchmark scores.",
      "parentUuid": "56929127_55d6f461",
      "range": {
        "startLine": 820,
        "startChar": 37,
        "endLine": 820,
        "endChar": 64
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b8e0331_936b8cb8",
        "filename": "src/heap/cppgc-js/cpp-heap.cc",
        "patchSetId": 39
      },
      "lineNbr": 820,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-11-20T11:03:10Z",
      "side": 1,
      "message": "So, the more parallel marking we have the more likely it is that we process a reference twice? \n\nThat seems inefficient to me.",
      "parentUuid": "dcc35110_aa0f72ea",
      "range": {
        "startLine": 820,
        "startChar": 37,
        "endLine": 820,
        "endChar": 64
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22afd294_ea81fb5d",
        "filename": "src/heap/cppgc-js/cpp-heap.cc",
        "patchSetId": 39
      },
      "lineNbr": 820,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-11-21T11:15:20Z",
      "side": 1,
      "message": "Yeah. We can \"publish\" an `is_in_atomic_pause` flag and let the concurrent markers check that as well and then we\u0027re less likely to revisit objects. We would still need to call this method multiple times in case a concurrent marker didn\u0027t observe the flag change.\nI had that in a previous version and it didn\u0027t impact benchmark scores.\nI\u0027ve restored this flag in the current patchset.",
      "parentUuid": "7b8e0331_936b8cb8",
      "range": {
        "startLine": 820,
        "startChar": 37,
        "endLine": 820,
        "endChar": 64
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d24ee3d2_9d2aeb5a",
        "filename": "src/heap/cppgc-js/unified-heap-marking-state.h",
        "patchSetId": 39
      },
      "lineNbr": 34,
      "author": {
        "id": 1131764
      },
      "writtenOn": "2023-10-27T12:00:21Z",
      "side": 1,
      "message": "I think `kVerify` is a bit misleading name. It really rechecks a condition.\n\nAren\u0027t the modes something like \"opportunistic\" and \"exact\"?",
      "range": {
        "startLine": 34,
        "startChar": 34,
        "endLine": 34,
        "endChar": 41
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "722e5881_5bff2b5d",
        "filename": "src/heap/cppgc-js/unified-heap-marking-state.h",
        "patchSetId": 39
      },
      "lineNbr": 34,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-10-31T13:58:49Z",
      "side": 1,
      "message": "One mode bails out on already marked nodes, the other dchecks that the node is already marked. We can rename kVerify to kCheck for example, but I don\u0027t think opportunistic and exact are correct here.\n(The kVerify option is used when iterating over previously found weak wrappers, in which case all of their nodes should already be marked.)",
      "parentUuid": "d24ee3d2_9d2aeb5a",
      "range": {
        "startLine": 34,
        "startChar": 34,
        "endLine": 34,
        "endChar": 41
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "82ebf8b5_7cb5ca26",
        "filename": "src/heap/cppgc-js/unified-heap-marking-state.h",
        "patchSetId": 39
      },
      "lineNbr": 34,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-11-27T16:00:18Z",
      "side": 1,
      "message": "Resolving",
      "parentUuid": "722e5881_5bff2b5d",
      "range": {
        "startLine": 34,
        "startChar": 34,
        "endLine": 34,
        "endChar": 41
      },
      "revId": "593227e84639abaa83cda180cb1dcb2d622b58d8",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}