{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8d9ac38d_55041d37",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1313365
      },
      "writtenOn": "2024-04-23T09:01:12Z",
      "side": 1,
      "message": "Hi Olivier,\n\nCould you please review this CL?\nI noticed you are working on reducing Maglev compilation jam (e.g., increasing v8_flags.concurrent_maglev_max_threads), is this CL reasonable for reducing Maglev compilation jam?",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b06959c1_599c212e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1313365
      },
      "writtenOn": "2024-05-13T05:36:32Z",
      "side": 1,
      "message": "Hi Olivier,\n\nYou may not notice this CL, could you please have a look at this CL?",
      "parentUuid": "8d9ac38d_55041d37",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e36f089_079ba5d6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1559107
      },
      "writtenOn": "2024-05-13T14:39:47Z",
      "side": 1,
      "message": "Thanks for bringing this to my attention. I am honestly not convinced that this is a good idea.",
      "parentUuid": "b06959c1_599c212e",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f17bbb88_64ef5ce6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1313365
      },
      "writtenOn": "2024-05-14T01:23:10Z",
      "side": 1,
      "message": "Thanks for your review! Please let me know if there are any shortcoming.",
      "parentUuid": "9e36f089_079ba5d6",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e120877_24952cc9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1559107
      },
      "writtenOn": "2024-05-14T11:53:41Z",
      "side": 1,
      "message": "Your are right about the frequency!\n\nIf we should or should not inline turbofanned functions is indeed a tricky question. I am not convinced by this solution. Just because we call the function often does not mean that maglev will be good at optimizing it or vice-versa.\n\nMaybe if we would look at the functions that this CL has an effect on, it could hint at optimizations missing in maglev.",
      "parentUuid": "f17bbb88_64ef5ce6",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5d9b999_389d1b11",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1313365
      },
      "writtenOn": "2024-05-15T06:16:11Z",
      "side": 1,
      "message": "Thanks for your analysis!\nI would like to state my understanding, if you have any questions, please feel free to correct them.\nWe call the function often means that maglev will be good at ***inlining*** it or vice-versa.\nThe influence of inline is complex, includes:\n1. Traditional inline benefit: make more inter-function optimization possible, avoid context switch, etc.\n2. Change code quality of the callee part. (from {unoptimized|maglevved|turbofanned} code to maglevved code)\n3. More compilation time and more memory consumption.\n\nThe overall influence can be calculated by: (1 + 2) * ***call_frequency*** + 3\n1 is always positive.\n2 is case by case, positive if unoptimized callee, zero if maglevved callee, negative if turbofanned callee.\n3 is always negative.\n\nAccording to my tuning test, if callee is turbofanned.\n\"1 + 2\" is positive\n\"1 + 2 + 3\" is negative\n\"(1 + 2) * n + 3\" is positive if n \u003e\u003e 1\n\n\"Optimizations missing in maglev\" ï¼ˆ2 is negative when callee is turbofanned) is caused by our tiering policy, maglev is intendedly less compilation time and slower code quality than turbofan.\nThe main benefit of this CL comes from reducing compilation time. This CL also includes a potential benefit that the saved inlined bytecode size budget make non-turbofanned callee whose call frequency is a little lower be inlined if have.\nI also added more description in message.",
      "parentUuid": "5e120877_24952cc9",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c013d83b_32ad10c0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2024-09-16T12:50:33Z",
      "side": 1,
      "message": "Which pinpoint should we look at for the improvements? The last S2 pinpoint looks like it\u0027s overall neutral at best, or slightly negative.",
      "parentUuid": "d5d9b999_389d1b11",
      "revId": "1e9958698b62aa6020a4c2168650789b7be63c58",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}