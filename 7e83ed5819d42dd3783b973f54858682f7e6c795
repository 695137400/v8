{
  "comments": [
    {
      "key": {
        "uuid": "9ed88e6b_dd3f0261",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 26
      },
      "lineNbr": 0,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-02T05:51:19Z",
      "side": 1,
      "message": "Thanks, comments addressed.",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5329555_67ab0391",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 26
      },
      "lineNbr": 0,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-02T10:09:31Z",
      "side": 1,
      "message": "Thanks Georg, one question back to you...",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b70c11c_f626a012",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 26
      },
      "lineNbr": 0,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2020-10-05T10:13:40Z",
      "side": 1,
      "message": "Did another pass at the CL and I have a couple of comments.\nOverall approach LGTM",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2fa92d2_1bbfea27",
        "filename": "src/objects/feedback-vector-inl.h",
        "patchSetId": 26
      },
      "lineNbr": 145,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2020-10-05T10:13:40Z",
      "side": 1,
      "message": "remove?",
      "range": {
        "startLine": 145,
        "startChar": 0,
        "endLine": 145,
        "endChar": 9
      },
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eef20a89_2d040930",
        "filename": "src/objects/feedback-vector-inl.h",
        "patchSetId": 26
      },
      "lineNbr": 145,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-05T15:28:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2fa92d2_1bbfea27",
      "range": {
        "startLine": 145,
        "startChar": 0,
        "endLine": 145,
        "endChar": 9
      },
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7de49c1f_79d3ce40",
        "filename": "src/objects/feedback-vector-inl.h",
        "patchSetId": 26
      },
      "lineNbr": 382,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2020-10-02T07:36:23Z",
      "side": 1,
      "message": "One simplification would be to always cache the values, regardless of the configuration.\n\nIf we do that, we could also read (and cache) the feedback right in the FeedbackNexus constructor, thus getting rid of the GetFeedbackPair method. Or do we ever create a FeedbackNexus but then don\u0027t read the feedback?",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03e5d305_9c50452a",
        "filename": "src/objects/feedback-vector-inl.h",
        "patchSetId": 26
      },
      "lineNbr": 382,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-02T10:09:31Z",
      "side": 1,
      "message": "The FeedbackNexus has at least 3 distinct usage patterns:\n1. By the IC subsystem, which creates 1 and uses it to write more than once (they have a predicate (bool vector_needs_update()).\n2. Same, but tolerating that a null vector was passed in case there is no feedback vector yet.\n3. JSHeapBroker which does a simple create/read/destroy pattern.\n\nI think case #3 works really well with your idea. Case #2 is trivially dealt with in that case. But case #1 would require me to set the cache values and push them through to the vector. For that case, I reckon the cache appears unnecessary. However, this might overall be a cleanup.\n\nGive me a thumbs up if you\u0027d like to see that and I\u0027ll upload a patchset with the change you suggest.",
      "parentUuid": "7de49c1f_79d3ce40",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ea53f50_2c1f0df3",
        "filename": "src/objects/feedback-vector-inl.h",
        "patchSetId": 26
      },
      "lineNbr": 382,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2020-10-05T06:58:44Z",
      "side": 1,
      "message": "No strong opinion, I\u0027ll let you decide.",
      "parentUuid": "03e5d305_9c50452a",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a353c632_e2ec2664",
        "filename": "src/objects/feedback-vector-inl.h",
        "patchSetId": 26
      },
      "lineNbr": 382,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-05T15:28:19Z",
      "side": 1,
      "message": "Okay thanks...I\u0027ll keep it this way for the moment, but I like the direction. The cache is now simpler.",
      "parentUuid": "7ea53f50_2c1f0df3",
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0abeaa35_c50c2780",
        "filename": "src/objects/feedback-vector.cc",
        "patchSetId": 26
      },
      "lineNbr": 503,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2020-10-05T10:13:40Z",
      "side": 1,
      "message": "Can we assume that the vector won\u0027t be null here? This is the only case where we assume that.",
      "range": {
        "startLine": 503,
        "startChar": 0,
        "endLine": 503,
        "endChar": 35
      },
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52936595_e2dc6673",
        "filename": "src/objects/feedback-vector.cc",
        "patchSetId": 26
      },
      "lineNbr": 503,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-05T15:28:19Z",
      "side": 1,
      "message": "Yes, because this constructor is only used by the compiler, which creates the FeedbackNexus in order to query information from the vector.\n\nThe other constructors are used by some runtime functions that sometimes need a kind of \"dummy\" FeedbackNexus. I don\u0027t particularly like that, and it\u0027s an area for cleanup. However this CL already has quite a bit of refactoring/cleanup of the tree and I\u0027d rather not tackle that now.",
      "parentUuid": "0abeaa35_c50c2780",
      "range": {
        "startLine": 503,
        "startChar": 0,
        "endLine": 503,
        "endChar": 35
      },
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8de5f24_e7415fa5",
        "filename": "src/objects/feedback-vector.h",
        "patchSetId": 26
      },
      "lineNbr": 836,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2020-10-05T10:13:40Z",
      "side": 1,
      "message": "nit: a more descriptive name? e.g. feedback_cache_?",
      "range": {
        "startLine": 836,
        "startChar": 6,
        "endLine": 836,
        "endChar": 12
      },
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28527c1b_db79b43e",
        "filename": "src/objects/feedback-vector.h",
        "patchSetId": 26
      },
      "lineNbr": 836,
      "author": {
        "id": 1118564
      },
      "writtenOn": "2020-10-05T15:28:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f8de5f24_e7415fa5",
      "range": {
        "startLine": 836,
        "startChar": 6,
        "endLine": 836,
        "endChar": 12
      },
      "revId": "7e83ed5819d42dd3783b973f54858682f7e6c795",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}