{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b5baca04_f84b682e",
        "filename": "src/runtime/runtime-atomics.cc",
        "patchSetId": 8
      },
      "lineNbr": 433,
      "author": {
        "id": 1323125
      },
      "writtenOn": "2022-04-28T19:51:56Z",
      "side": 1,
      "message": "Hello Marja,\n\nJust wanted to point out the newly added test is causing this check to fail on platforms which bailout to runtime such as PPC and S390X:\n```\nCheck failed: index \u003c sta-\u003elength() (4 vs. 4).\n```\n\nI\u0027ve created this CL https://crrev.com/c/3615010 to avoid a bailout on our \nplatforms which passes the test but wanted to still check if test failure was expected when calling runtime?",
      "revId": "a64bb799878bc6952a5c6b1dfa7fdc2641d57b4f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5535cfbc_9a0340fc",
        "filename": "src/runtime/runtime-atomics.cc",
        "patchSetId": 8
      },
      "lineNbr": 433,
      "author": {
        "id": 1115961
      },
      "writtenOn": "2022-04-29T07:31:47Z",
      "side": 1,
      "message": "Oops, thanks for pointing that out. Probably this check needs to be adapted. I think the fix is using GetLength() instead of length(), but I don\u0027t have a quick way to test it.",
      "parentUuid": "b5baca04_f84b682e",
      "revId": "a64bb799878bc6952a5c6b1dfa7fdc2641d57b4f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b678a40_e4813733",
        "filename": "src/runtime/runtime-atomics.cc",
        "patchSetId": 8
      },
      "lineNbr": 433,
      "author": {
        "id": 1323125
      },
      "writtenOn": "2022-04-29T14:02:45Z",
      "side": 1,
      "message": "Thanks, I tried GetLength() but it\u0027s also causing failures:\n```\n# Fatal error in ../../src/runtime/runtime-atomics.cc, line 510\n# Check failed: index \u003c sta-\u003eGetLength() (2 vs. 0).\n```\nYou can try using our build and run it with the simulator to see the error if you like:\n```\n$ tools/dev/gm.py ppc64.release\n```\nI\u0027ve just enabled TF atomic builtins on our platforms here which solves it, would you please take a look when you have a chance, https://crrev.com/c/3616722",
      "parentUuid": "5535cfbc_9a0340fc",
      "revId": "a64bb799878bc6952a5c6b1dfa7fdc2641d57b4f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}