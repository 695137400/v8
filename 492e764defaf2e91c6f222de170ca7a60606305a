{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1ed82051_1e36725d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1374077
      },
      "writtenOn": "2023-05-12T13:58:08Z",
      "side": 1,
      "message": "PTAL, thanks",
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b83c5e17_7922a915",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-05-12T14:10:28Z",
      "side": 1,
      "message": "LGTM, except for this BranchElimination + MemoryOptimization merge that I\u0027m not sure about...",
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4758d1a7_8d533ab1",
        "filename": "src/compiler/turboshaft/dead-code-elimination-phase.cc",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-05-12T14:10:28Z",
      "side": 1,
      "message": "Could we rename this maybe? It\u0027s not super intuitive that DeadCodeEliminationPhase actually does some lowerings. I don\u0027t have a good name idea though, so if you don\u0027t either, feel free to keep DeadCodeEliminationPhase ;)",
      "range": {
        "startLine": 13,
        "startChar": 5,
        "endLine": 13,
        "endChar": 29
      },
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "faf8ebd1_43616936",
        "filename": "src/compiler/turboshaft/dead-code-elimination-phase.cc",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1374077
      },
      "writtenOn": "2023-05-12T14:13:08Z",
      "side": 1,
      "message": "I agree, I thought the same but also couldn\u0027t come up with a genuinely good name.",
      "parentUuid": "4758d1a7_8d533ab1",
      "range": {
        "startLine": 13,
        "startChar": 5,
        "endLine": 13,
        "endChar": 29
      },
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8166451_ea20081b",
        "filename": "src/compiler/turboshaft/optimize-phase.cc",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-05-12T14:10:28Z",
      "side": 1,
      "message": "I\u0027m not sure that you can safely combine BranchEliminationReducer and MemoryOptimizationReducer. Tobias and I had a discussion about that a while ago, and I think that we concluded that it would be better to have them in different phases, but maybe we were too cautious, and having them in a single phase is fine... We should loop Tobias in.",
      "range": {
        "startLine": 25,
        "startChar": 18,
        "endLine": 27,
        "endChar": 43
      },
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d35c6490_0fc71247",
        "filename": "src/compiler/turboshaft/optimize-phase.cc",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1374077
      },
      "writtenOn": "2023-05-12T14:13:08Z",
      "side": 1,
      "message": "Do you remember the reasoning behind this? I ran all tests and they seem fine. Okay, then let\u0027s discuss on Monday.",
      "parentUuid": "a8166451_ea20081b",
      "range": {
        "startLine": 25,
        "startChar": 18,
        "endLine": 27,
        "endChar": 43
      },
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7013d51_41041061",
        "filename": "src/compiler/turboshaft/optimize-phase.cc",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-05-12T14:45:57Z",
      "side": 1,
      "message": "I think that the reasoning is more or less \"BranchElim could introduce / remove allocations, which would make MemoryOpt\u0027s analysis wrong, which would lead to incorrect allocation mergings\". But maybe it can\u0027t really happen. We\u0027ll have to think more about it ðŸ™‚",
      "parentUuid": "d35c6490_0fc71247",
      "range": {
        "startLine": 25,
        "startChar": 18,
        "endLine": 27,
        "endChar": 43
      },
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97a2d641_121872c3",
        "filename": "src/compiler/turboshaft/optimize-phase.cc",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1180419
      },
      "writtenOn": "2023-05-15T09:56:15Z",
      "side": 1,
      "message": "It should (probably?) be safe, but we could miss out on optimization opportunities as reducers that use analysis on the input graph don\u0027t take other reducers optimizations into account. How about putting `BranchEliminatinReducer` into the machine lowering phase?",
      "parentUuid": "b7013d51_41041061",
      "range": {
        "startLine": 25,
        "startChar": 18,
        "endLine": 27,
        "endChar": 43
      },
      "revId": "492e764defaf2e91c6f222de170ca7a60606305a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}