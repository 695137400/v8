{
  "comments": [
    {
      "key": {
        "uuid": "8b290283_aeba2e52",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2019-10-23T05:17:13Z",
      "side": 1,
      "message": "I\u0027m sorry, the CL message is still cryptic to me. \n\n- The TaggedEqual opcode is in fact *not* added in this CL.\n- Then I think the description states why it will, in the future, not be necessary to add Word32Equal handling to the decompression optimizer? \n\nPlease describe what *this* CL does. Something like \u0027mark inputs of kChangeTaggedToCompressed nodes as kOnly32BitsObserved\u0027 and then briefly say why that is possible and what happens with the TaggedToCompressed node later.",
      "revId": "61e73691af89bd8166d0facb9cc55a0bdc93ac8f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82e0d3fd_10ec713c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2019-10-23T09:46:48Z",
      "side": 1,
      "message": "TaggedEqual is not added in the CL because it\u0027s not a Machine node (it\u0027s not an opcode either). It gets translated to ChangeTaggedToCompressed here (https://cs.chromium.org/chromium/src/v8/src/compiler/graph-assembler.cc?l\u003d102\u0026rcl\u003d704ce5c7f10c6e96877e23c19f65aad2b3faf5f9).\n\nThen, the description states why it\u0027s not necessary to add a Word32Equal case. We currently always have a ChangeTaggedToCompressed between the Word32Equal and the value. It\u0027s not talking about the future; it\u0027s talking about now.\n\nI think it\u0027s important to have the first line of the CL talk about TaggedEqual. The only reason we are adding ChangeTaggedToCompressed it\u0027s because of how TaggedEqual is generated.",
      "parentUuid": "8b290283_aeba2e52",
      "revId": "61e73691af89bd8166d0facb9cc55a0bdc93ac8f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bbbcb4f_8f678272",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2019-10-23T10:14:02Z",
      "side": 1,
      "message": "As discussed offline, I think it\u0027d be a clearer mental model to just consider ChangeTaggedToCompressed and Word32Equal on their own. In both cases, it conceptually makes sense to mark their inputs as kOnly32BitsObserved. The connection to TaggedEqual is irrelevant.\n\nWdyt about marking Word32Equal inputs as kOnly32BitsObserved (in addition to ChangeTaggedToCompressed). And rephrasing descriptions to refer to \u0027Word32Equal and ChangeTaggedToCompressed\u0027 instead of TaggedEqual.",
      "parentUuid": "82e0d3fd_10ec713c",
      "revId": "61e73691af89bd8166d0facb9cc55a0bdc93ac8f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c7eb545_6834aba0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2019-10-23T11:48:20Z",
      "side": 1,
      "message": "Updated.\nWDYT about the title? Couldn\u0027t add the opcodes there due to the title size limit.",
      "parentUuid": "6bbbcb4f_8f678272",
      "revId": "61e73691af89bd8166d0facb9cc55a0bdc93ac8f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db520769_57ff3861",
        "filename": "src/compiler/decompression-optimizer.cc",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2019-10-23T05:17:13Z",
      "side": 1,
      "message": "Same comment here as for the CL message, it isn\u0027t clear why the part about Word32Equal exists.. Is it an explanation for why the switch case does not need to handle IrOpcode::kWord32Equal? If so, I think it\u0027d be clearer to rephrase \u0027There is no need for the Word32Equal to propagate kOnly32BitsObserved since its input are ChangeTaggedToCompressed nodes.\u0027\n\nA related question: will these ChangeTaggedToCompressed nodes remain in the future?",
      "revId": "61e73691af89bd8166d0facb9cc55a0bdc93ac8f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26691de1_0a3de70a",
        "filename": "src/compiler/decompression-optimizer.cc",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2019-10-23T09:46:48Z",
      "side": 1,
      "message": "Updated the comment in the code.\n\nAs far as I understood, the ChangeTaggedToCompressed will be eliminated, but there is no CL in flight just yet. Since we want to swap systems now, it\u0027s relevant to add this case.",
      "parentUuid": "db520769_57ff3861",
      "revId": "61e73691af89bd8166d0facb9cc55a0bdc93ac8f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}