{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "31208edc_0658cf43",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1418022
      },
      "writtenOn": "2020-11-06T21:17:22Z",
      "side": 1,
      "message": "Can someone please run a commit-queue for me again? Thank you!!",
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7b18c28_81f8ae04",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1418022
      },
      "writtenOn": "2020-11-06T22:44:30Z",
      "side": 1,
      "message": "Hooray! I don\u0027t know what the next steps are to get this submitted ðŸ˜Š",
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa50dd06_cb920760",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1132654
      },
      "writtenOn": "2020-11-09T08:54:25Z",
      "side": 1,
      "message": "PTAL, LGTM from my-side.\n\nSara, please wait for LGTMS both from Clemens and Emanuel before landing.",
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f868f5f1_519cfe48",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1132654
      },
      "writtenOn": "2020-11-09T08:55:27Z",
      "side": 1,
      "message": "The node-ci failures seem unrelated to this CL ",
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f721b90c_ce3aa517",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1177599
      },
      "writtenOn": "2020-11-09T11:05:29Z",
      "side": 1,
      "message": "Removing myself from reviewers, Emanuel has this well covered.\n(I was only added to reviewers because I clicked CQ+1.)",
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "82cffa3d_40446e66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-11-09T11:25:22Z",
      "side": 1,
      "message": "include/* change lgtm",
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca97433d_ddbf9a6d",
        "filename": "src/logging/metrics.h",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1132654
      },
      "writtenOn": "2020-11-06T21:36:26Z",
      "side": 1,
      "message": "FYI: I\u0027ve discussed with Sara that changing the TimedScope slightly might be useful.\n\n1) Dropping the explicit member pointer in favor of a simpler interface (can be re-added later if we ever end up having ambiguities)\n\n2) In the future TimedScope should probably add the event directly to the recorder. The parser and compiler scopes on the JS-side set precedence for it. They usually have early returns and no single entry point.\n\n3) For the places in WASM code, where you create the events after doing the work, we can rely on the ElapsedTimer directly (with the upside of having nice DCHECKs)\n\nFor the JS runtime it would make sense to get very close to the behavior of RuntimeCallTimerScope so we can have a drop-in replacement in the future in the not-so performance critical places.",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bbff4d0e_60502f8b",
        "filename": "src/logging/metrics.h",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1381588
      },
      "writtenOn": "2020-11-09T10:49:35Z",
      "side": 1,
      "message": "Point 2) was actually the originally planned functionality, but ulan@ had requested the option to have timings independent of submissions because they wanted to time different parts of their  code within the same event.\n\nMaybe they will be fine with using ElapsedTimer instead, but I\u0027m not sure. It can definitely be assumed that not all events will have a wall_clock_duration_in_us field and potentially have multiple different timers.\n\nIn the current state of TimedScope, it\u0027s too specific to be of general interest and I think we should either remove it for the time being or replace it by the original measure and submit mechanism. Other places that require it can then use the ElapsedTimer instead.",
      "parentUuid": "ca97433d_ddbf9a6d",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2b788dd_919485c2",
        "filename": "src/logging/metrics.h",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-11-09T11:25:22Z",
      "side": 1,
      "message": "To confirm what Emanuel said: we should not couple measurement and reporting on the API level. \n\nThis is because an event may contain multiple related measurements. As a concrete example, here is how we are planning to use it in GC:\n\nstruct MarkCompact {\n  int64_t marking_duration_us;\n  int64_t evacuation_duration_us;\n  int64_t sweeping_duration_us;\n};\n\nEach field corresponds to a phase of GC and is measured at different times.",
      "parentUuid": "bbff4d0e_60502f8b",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "edf52f85_269e4fb9",
        "filename": "src/logging/metrics.h",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1132654
      },
      "writtenOn": "2020-11-09T11:51:02Z",
      "side": 1,
      "message": "Ok, maybe we should move this discussion to the design doc.\n\nWe will definitely need something like the proposed TimedScope from this CL. RuntimeCallTimerScope and trace-events in the runtime are placed in functions with early returns, so you don\u0027t have a clean entry and exit point. That means you currently cannot easily use the existing TimedScope.\n\nFrom the existing usage of TimedScope, I don\u0027t see much advantages over using directly the ElapsedTimer, but I\u0027ve not followed the development process close enough to know other use-cases.",
      "parentUuid": "b2b788dd_919485c2",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3452d29_a865c432",
        "filename": "src/logging/metrics.h",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-11-09T12:11:16Z",
      "side": 1,
      "message": "To be clear: this change looks good to me. I was objecting to the potential future changes where we make TimedScope a requirement for recording events IIUC.",
      "parentUuid": "edf52f85_269e4fb9",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 99,
        "endChar": 0
      },
      "revId": "facff92b9b4bdf0f90e851096bc9007717b18ced",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}