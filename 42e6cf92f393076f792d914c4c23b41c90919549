{
  "comments": [
    {
      "key": {
        "uuid": "fb2ed702_d24e822f",
        "filename": "src/builtins/builtins-typedarray-gen.cc",
        "patchSetId": 3
      },
      "lineNbr": 785,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2017-11-24T12:57:08Z",
      "side": 1,
      "message": "Just a bit of refactoring. No functional changes.",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8111d419_5c5d475a",
        "filename": "src/elements.cc",
        "patchSetId": 3
      },
      "lineNbr": 3278,
      "author": {
        "id": 1132654
      },
      "writtenOn": "2017-11-24T14:16:05Z",
      "side": 1,
      "message": "I would feel safer if the following conditions are still DCHECK\u0027ed in debug mode (modulo names):\n\n... HoleyPrototypeLookupRequired(...) {\n  if (isolate-\u003econtext() \u003d\u003d nullptr) {\n    DCHECK(BasicHoleyPrototypeLookupRequired(...));\n    return false;\n  }\n  return BasicHoleyPrototypeLookupRequired(...);\n}",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edc7bd40_e9debae2",
        "filename": "src/elements.cc",
        "patchSetId": 3
      },
      "lineNbr": 3278,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2017-11-24T14:34:19Z",
      "side": 1,
      "message": "I don\u0027t like skipping checks much either. But we can neither check for the initial_array_prototype, nor the NoElementsProtector without a context.\n\nI supposed I can move the bailout to just before is_initial_array_prototype below. The alternative is to set up the thread-local context pointer before CallCFunction.",
      "parentUuid": "8111d419_5c5d475a",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "833a84d5_f290c6cc",
        "filename": "src/elements.cc",
        "patchSetId": 3
      },
      "lineNbr": 3278,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2017-11-27T10:34:16Z",
      "side": 1,
      "message": "After some more thought, I still don\u0027t have a good solution for this:\nOur options as I see them:\n\n1) Don\u0027t check if called from CSA, i.e. isolate-\u003econtext() is nullptr.\n2) Do a partial check if called from CSA.\n3) Pass in the context from CSA.\n4) Set Isolate::context_ before CallCFunction.\n\nRe 2: IMO a partial check is not much better then no check at all.\nRe 3: This makes the interface very unnatural, we\u0027d also have to change Isolate::IsNoElementsProtectorIntact to read from the passed context rather than the isolate.\nRe 4: Seems okeyish, but I\u0027m hesitant to add such a change to this CL. Setting \u0026 accessing Isolate::context from CallCFunction should be discussed with other involved folks. \n\nSo that leaves us with option 1, which at least documents this oddity somehow. WDYT?",
      "parentUuid": "edc7bd40_e9debae2",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fb2e03d_579f98c3",
        "filename": "src/elements.cc",
        "patchSetId": 3
      },
      "lineNbr": 3278,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2017-11-27T12:34:00Z",
      "side": 1,
      "message": "After offline discussion: went with 3) for now, opened https://crbug.com/v8/7128 to perhaps transition to 4) in the future.",
      "parentUuid": "833a84d5_f290c6cc",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "291e190b_2ef498be",
        "filename": "test/mjsunit/es6/typedarray.js",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1132654
      },
      "writtenOn": "2017-11-24T15:38:07Z",
      "side": 1,
      "message": "Can you add a .set test for TypedArray ElementsKind X JSArray ElementsKind?",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e97fc00_8cd91e0a",
        "filename": "test/mjsunit/es6/typedarray.js",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2017-11-27T10:34:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "291e190b_2ef498be",
      "revId": "42e6cf92f393076f792d914c4c23b41c90919549",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}