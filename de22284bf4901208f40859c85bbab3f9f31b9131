{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e5a653a1_7cc45feb",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1183889
      },
      "writtenOn": "2022-09-05T12:54:27Z",
      "side": 1,
      "message": "This will not work for weak MaybeObjects and thus it has to be moved down into the else part. See my code snipped above.",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc4c0a3e_b2f6886f",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1420650
      },
      "writtenOn": "2022-09-05T13:15:46Z",
      "side": 1,
      "message": "In the \"if\" part we only use it in `Print()`, but it seems that there is no such member function defined in `MaybeObject`. The only `Print()` is defined in `Object` and it seems that it can handle weak reference:\nhttps://source.chromium.org/chromium/chromium/src/+/main:v8/src/objects/objects.cc;l\u003d1786\n\nDo we need to move this definition to TaggedImpl?",
      "parentUuid": "e5a653a1_7cc45feb",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "927b3845_0a2853b1",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1183889
      },
      "writtenOn": "2022-09-05T13:28:56Z",
      "side": 1,
      "message": "I actually meant to use this one: https://source.chromium.org/chromium/chromium/src/+/main:v8/src/diagnostics/objects-printer.cc;l\u003d2580?q\u003dTaggedImpl%3CkRefType,%20StorageType%3E::Print\u0026ss\u003dchromium\n\nIIUC it should be available in MaybeObject too.",
      "parentUuid": "bc4c0a3e_b2f6886f",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f34f61fa_2c446d94",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1420650
      },
      "writtenOn": "2022-09-05T13:59:47Z",
      "side": 1,
      "message": "It seems that it only works with `#ifdef OBJECT_PRINT`\nhttps://source.chromium.org/chromium/chromium/src/+/main:v8/src/diagnostics/objects-printer.cc;l\u003d2602?q\u003dTaggedImpl%3CkRefType,%20StorageType%3E::Print\u0026ss\u003dchromium\n\nI tried this but there will be `error: undefined symbol` if I don\u0027t add GN flag `v8_enable_object_print`.",
      "parentUuid": "927b3845_0a2853b1",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa74e955_6b3fe8e4",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1183889
      },
      "writtenOn": "2022-09-05T14:05:27Z",
      "side": 1,
      "message": "There should be a fallback: https://source.chromium.org/chromium/chromium/src/+/main:v8/src/objects/tagged-impl.h;l\u003d220;drc\u003d8fb7fe37e209c5298794250f2217737aae1fd42e;bpv\u003d1;bpt\u003d1\n\nAre you building it in component mode? Maybe the issue is that the TaggedImpl::ShortPrint is not exported or maybe the ShortPrint is not instantiated for MaybeObject case?",
      "parentUuid": "f34f61fa_2c446d94",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecf86246_109ecfdf",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1420650
      },
      "writtenOn": "2022-09-06T14:51:51Z",
      "side": 1,
      "message": "My build config is `is_debug \u003d true` and `is_component_build \u003d false` so it actually calls to the `TaggedImpl::Print()` in `object-printer.cc`:\nhttps://source.chromium.org/chromium/chromium/src/+/main:v8/src/diagnostics/objects-printer.cc;l\u003d2580?q\u003dTaggedImpl%3CkRefType,%20StorageType%3E::Print\u0026ss\u003dchromium\n\nIt seems that `TaggedImpl::Print()` is not instantiated and result in the below error:\n\n    ld.lld: error: undefined symbol: v8::internal::TaggedImpl\u003c(v8::internal::HeapObjectReferenceType)0, unsigned long\u003e::Print(std::Cr::basic_ostream\u003cchar, std::Cr::char_traits\u003cchar\u003e\u003e\u0026)\n    \nHowever, `TaggedImpl::ShortPrint()` is instantiated and we can use this without build failed. Do we need to try to fix the `Print` issue or just use `ShortPrint` in this case?",
      "parentUuid": "fa74e955_6b3fe8e4",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dfdd48bd_de0b8acb",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1183889
      },
      "writtenOn": "2022-09-06T15:07:49Z",
      "side": 1,
      "message": "I think it\u0027s fair to expect that we can use `TaggedImpl::Print()` when `OBJECT_PRINT` is enabled. Could you please ensure Print is instantiated for MaybeObject case?\nProbably the easiest way would be to move the methods from objects-printer.cc to tagged-impl.cc.",
      "parentUuid": "ecf86246_109ecfdf",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19f5d859_3ac6c883",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1420650
      },
      "writtenOn": "2022-09-07T09:26:58Z",
      "side": 1,
      "message": "This works, thanks!\nHowever, the trybot failed in the below checks:\nhttps://ci.chromium.org/ui/p/v8/builders/try.triggered/v8_linux64_dbg_ng_triggered/b8803695085348110337/overview\n\nI found that the failure are caused by TIMEOUT, and according to my local test, we can actually pass these checks after a couple minutes. I think one of the reason might be that we do more checks in `CheckObjectType`, so the consumed time is longer. What do you think?",
      "parentUuid": "dfdd48bd_de0b8acb",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c7b6940e_a462884a",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1183889
      },
      "writtenOn": "2022-09-07T09:56:30Z",
      "side": 1,
      "message": "I think we shouldn\u0027t run those benchmarks in debug mode for jitless/nooptimization variants.\nLet\u0027s try to land the CL and and I\u0027ll update the benchmark.status file in the mean time.",
      "parentUuid": "19f5d859_3ac6c883",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5801ede2_45e859fe",
        "filename": "src/objects/object-type.cc",
        "patchSetId": 15
      },
      "lineNbr": 17,
      "author": {
        "id": 1420650
      },
      "writtenOn": "2022-09-07T10:56:53Z",
      "side": 1,
      "message": "@Leszek @Tobias Please help to review the changes in src/compiler and src/interpreter. Thanks!",
      "parentUuid": "c7b6940e_a462884a",
      "revId": "de22284bf4901208f40859c85bbab3f9f31b9131",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}