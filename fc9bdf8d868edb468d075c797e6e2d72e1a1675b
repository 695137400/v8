{
  "comments": [
    {
      "key": {
        "uuid": "f4c59ad0_1005363f",
        "filename": "src/bootstrapper.cc",
        "patchSetId": 18
      },
      "lineNbr": 1741,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Are we moving away from the old naming scheme? We used it quite consistently in the old CSA world. I guess the main benefit was that the name would distinguish between functions installed on the prototype and functions installed on the object itself.\n\nI\u0027m fine with both ways but imo we should pick one and stay consistent.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f2f4927_0b15c4cc",
        "filename": "src/bootstrapper.cc",
        "patchSetId": 18
      },
      "lineNbr": 1741,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "As discussed, I will fix this name up after I know I can remove the old implementation.",
      "parentUuid": "f4c59ad0_1005363f",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3538974f_37eb811b",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 11,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "The runtime function checks\n\n JSObject::PrototypeHasNoElements(isolate, *object) \u0026\u0026 !object-\u003eHasComplexElements()\n\nDo we not need this here?",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71b6e025_8d631bf8",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 11,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "I don\u0027t think these are necessary for arguments objects, since complex elements would have a led to a map transition which would fail the map check that gates calling this function. However, a IsNoElementsProtectorCellInvalid check does seem to be necessary.",
      "parentUuid": "3538974f_37eb811b",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b89abf75_18c1b308",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 13,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Can this ever happen? We just checked against args.length before the call.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bba4afce_01941bf4",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 13,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Yes, since args.length can be different from sourceElements.length.",
      "parentUuid": "b89abf75_18c1b308",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "13b0492f_dfbaf2a2",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 24,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Hmm we should make it explicit that the result of AllocateJSArray is in new space (both the JSArray itself and its elements)? At least conceptually JSArray allocation allocs two objects and the second could trigger gc. In practice its currently fine since we alloc both JSArray and its elements in one go. Doesn\u0027t have to be in this CL though.\n\n\nAnd comment two: this looks like a candidate callsite for Michael\u0027s recently-added memcpy helper instead of the loop.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9da97b77_eaa968d8",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 24,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "13b0492f_dfbaf2a2",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bbea9a0f_ddb4e235",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 74,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Likewise this could also use memcpy / CodeStubAssembler::CopyElements.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14f20671_91ace4a1",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 74,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bbea9a0f_ddb4e235",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "07694bfe_83b597ca",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 92,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Not sure I understand this comment. Should this be \u0027Start can be less than zero\u0027?\n\nHow can len be \u003c 0? Even if the length property is negative, Step 3 in the algorithm is \n\n len \u003d ToLength(o.length)\n\nand ToLength only returns non-negative numbers. Could this turn into an assertion?",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a16976f_2ea71298",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 92,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Very, very good catch. There was a bug in base.tq where the ToLength wasn\u0027t applied to argument arguments length in the GetLengthProperty macro. Now fixed this and tightened up + tested a few additional cases.",
      "parentUuid": "07694bfe_83b597ca",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1adbc8b3_0dbbc059",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 110,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Would it make sense to add IsFastAliasedArgumentsMap / IsSloppyArgumentsMap / IsStrictArgumentsMap helpers? We have similar things everywhere in CSA.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d7dde43_89ebe58f",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 110,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Good idea. Done.",
      "parentUuid": "1adbc8b3_0dbbc059",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa64ff25_cd100648",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 116,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Just a reminder, Runtime::kTrySliceSimpleNonFastElements can be removed together with ArrayPrototypeSlice.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d36f212_6d2ace68",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 116,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "fa64ff25_cd100648",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8070cec7_4ef7cbac",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 164,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "At this point, just for clarity, we could assert \n\n 0 \u003c\u003d k \u003c\u003d length\n 0 \u003c\u003d final \u003c\u003d length\n 0 \u003c\u003d count \u003c\u003d length",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1d28792_aaec6d5a",
        "filename": "src/builtins/array-slice.tq",
        "patchSetId": 18
      },
      "lineNbr": 164,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8070cec7_4ef7cbac",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aaa2297a_fa51ab78",
        "filename": "src/builtins/array.tq",
        "patchSetId": 18
      },
      "lineNbr": 27,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "q: Does \u0027Cast\u003c\u003e() otherwise unreachable\u0027 generate a runtime check?",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae1dd430_ed02781c",
        "filename": "src/builtins/array.tq",
        "patchSetId": 18
      },
      "lineNbr": 27,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Yes, it does leave behind a runtime check. Theoretically, we should change the code so that it is passed in a FastJSArray in the first place, but in the absence of that, this check seems reasonable.",
      "parentUuid": "aaa2297a_fa51ab78",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b2c519d_9b309cfb",
        "filename": "src/builtins/base.tq",
        "patchSetId": 18
      },
      "lineNbr": 43,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Back when Simon was working on sort, we briefly discussed similar types but decided not to use them because they implied a safety that doesn\u0027t exist - e.g. the array can go slow but the type would still remain FastJSArray.\n\nSo my question is, has this changed? What\u0027s a volatile type? What happens if we successfully cast to a FastJSArray, then call into user JS code (which may mutate the array)? If we have a FastJSArray, is it guaranteed that the actual array is fast at all possible points?",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44a1b2f3_4dc8557a",
        "filename": "src/builtins/base.tq",
        "patchSetId": 18
      },
      "lineNbr": 43,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "As discussed, we will (soon) be adding explicitly volatile types which will track the use cases you describe and flag improper usage (e.g. usage after intermediary calls).",
      "parentUuid": "7b2c519d_9b309cfb",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed2ff637_abc02f44",
        "filename": "src/builtins/base.tq",
        "patchSetId": 18
      },
      "lineNbr": 805,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "With the order change these two lines become unreachable.",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6483c6d_20313ca3",
        "filename": "src/builtins/base.tq",
        "patchSetId": 18
      },
      "lineNbr": 805,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "Fixed.",
      "parentUuid": "ed2ff637_abc02f44",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e9ac276_978ec035",
        "filename": "src/debug/debug-evaluate.cc",
        "patchSetId": 18
      },
      "lineNbr": 560,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2018-10-18T09:27:38Z",
      "side": 1,
      "message": "Are you planning to remove ArrayPrototypeSlice in a follow-up?",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "794145b8_681e4f58",
        "filename": "src/debug/debug-evaluate.cc",
        "patchSetId": 18
      },
      "lineNbr": 560,
      "author": {
        "id": 1115890
      },
      "writtenOn": "2018-10-19T06:09:51Z",
      "side": 1,
      "message": "You bet. Want to keep the old code in there for now in case we need to roll back. :-)",
      "parentUuid": "3e9ac276_978ec035",
      "revId": "fc9bdf8d868edb468d075c797e6e2d72e1a1675b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}