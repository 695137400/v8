{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "dc69c10d_bb1746f7",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2023-03-28T14:05:55Z",
      "side": 1,
      "message": "is this because the float64 phi is not considered a float64 use?",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "002c5661_4043724c",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-03-28T14:10:11Z",
      "side": 1,
      "message": "Yes, Phi uses are actually ignored.\n(I think it makes some sense to ignore them, but, technically, they are ignored because phi inputs don\u0027t go through GetTagged)\nI could add a comment explaining that.",
      "parentUuid": "dc69c10d_bb1746f7",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "687a5049_e26f8660",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2023-03-28T14:12:44Z",
      "side": 1,
      "message": "What happens then if this is an int32 Phi using a float64 Phi?",
      "parentUuid": "002c5661_4043724c",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37157fb4_b118edda",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-03-28T14:16:18Z",
      "side": 1,
      "message": "For a moment I thought that you broke my implementation, but I think that this is fine: when untagging the subsequent Phi, we take into account the current (post untagging) representation of its input. So, if a Phi has a Float64 input (be it an untagged Phi or something else), then it can\u0027t be untagged to Int32.\n\nWhile correct, this is possibly suboptimal, since this case will insert a Float64Box of the Float64 Phi input, but I think that we have to live with it if we don\u0027t want to iterate multiple times over the graph to find the optimal representation.",
      "parentUuid": "687a5049_e26f8660",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8645c73b_ca9578b9",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-03-28T14:17:25Z",
      "side": 1,
      "message": "(and I just ran a test to make sure that it works; I might add it to the maglev mjsunit tests to make sure that we don\u0027t break this in the future)",
      "parentUuid": "37157fb4_b118edda",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e2f74c0_71e3e0ef",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2023-03-28T14:23:37Z",
      "side": 1,
      "message": "So why is the case in this CL broken but the other case isn\u0027t? They seem symmetrical to me (aside from missing deopt info).",
      "parentUuid": "8645c73b_ca9578b9",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1318978_b156d662",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-03-28T15:02:26Z",
      "side": 1,
      "message": "They are not symmetrical because if a Phi has some Int32 inputs, it can become a Float64 Phi (if some other conditions are here), but if a Phi has Float64 inputs, it can never become a Int32 Phi.",
      "parentUuid": "4e2f74c0_71e3e0ef",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2089bb41_c0e3fd7b",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2023-03-28T15:12:36Z",
      "side": 1,
      "message": "Ah, I see, this is from the representation widening, and only needed for phis because all other non-tagged inputs will have had a to-tagged conversion between them and the phi. This makes sense but deserves a quick comment.",
      "parentUuid": "d1318978_b156d662",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2da9bcfa_ddb6e2a6",
        "filename": "src/maglev/maglev-phi-representation-selector.cc",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1535927
      },
      "writtenOn": "2023-03-28T15:56:23Z",
      "side": 1,
      "message": "I\u0027ve added a comment, PTAL :)",
      "parentUuid": "2089bb41_c0e3fd7b",
      "range": {
        "startLine": 303,
        "startChar": 8,
        "endLine": 303,
        "endChar": 61
      },
      "revId": "159aaa185b0eedb832e046e2342bd9832d0f4675",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}