{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ab13e5eb_0c190b69",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1177599
      },
      "writtenOn": "2020-09-22T07:04:43Z",
      "side": 1,
      "message": "I have no idea what this change is about. Looks GC related, plus changes public API, thus adding Ulan.",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a22604bb_74301af0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2020-09-22T07:30:26Z",
      "side": 1,
      "message": "+1 :)",
      "parentUuid": "ab13e5eb_0c190b69",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fd6b3cb3_aeae42a0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-09-22T08:01:49Z",
      "side": 1,
      "message": "Hi Hong. Thanks for the patch!\n\nWe are planning to remove RAIL APIs from V8 and instead provide a generic API that allows the embedder to choose between memory / performance directly. It will happen sometime in Q4.\n\nIs this fix urgent for you?\n\n",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a664f48d_31ccf459",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-09-22T08:29:24Z",
      "side": 1,
      "message": "PTAL",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1654dc81_98c012d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-09-22T08:29:24Z",
      "side": 1,
      "message": "Thanks all for your quick response.\n@Ulan, we meet a critical performance issue caused by inaccurate load start time, which degrades WebXPRT3 (a famous industry web workload) ~5% performance. This patch is to fix the issue. If we can land it ASAP, I would be very appreciated. If not, can I try your new solution to verify if it can resolve the issue?",
      "parentUuid": "fd6b3cb3_aeae42a0",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b332c36d_6aa6b6b0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-09-22T09:50:03Z",
      "side": 1,
      "message": "This API was implemented 4 year ago and did not change since.\n\nIs the issue you\u0027re observing a recent regression? If so, then the actual issue may be elsewhere.",
      "parentUuid": "1654dc81_98c012d7",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c3ed82b_9bbdd40f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-09-22T10:09:44Z",
      "side": 1,
      "message": "It\u0027s not a recent regression. We just found it recently. Maybe it was there 4 years ago.",
      "parentUuid": "b332c36d_6aa6b6b0",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91969910_b708f9b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-09-23T16:06:33Z",
      "side": 1,
      "message": "Thanks Hong. If the issue was present for 4 years, we should not rush to add an API that we will deprecate soon.\n\nI will ping you when we add the new API in Q4.",
      "parentUuid": "0c3ed82b_9bbdd40f",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f031c06_83226579",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-09-24T01:04:13Z",
      "side": 1,
      "message": "Thanks Ulan, look forward to your ping :-)",
      "parentUuid": "91969910_b708f9b8",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9674b891_d5b9b217",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-11-18T03:39:34Z",
      "side": 1,
      "message": "Hi Ulan, half a Q4 has passed, is there any update about RAIL API refactor? :-)",
      "parentUuid": "2f031c06_83226579",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "70e6dcea_964c754c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-11-18T08:43:35Z",
      "side": 1,
      "message": "Hi Hong. No update so far due to other higher priority work. It may slip to Q1.",
      "parentUuid": "9674b891_d5b9b217",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "482c3f17_668b9053",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-11-24T05:05:17Z",
      "side": 1,
      "message": "because the load time issue is performance related (downgrade WebXPRT3 performance by ~4%) and new api refactor is delayed. can we review this CL firstly?  we have waited 2 months :-)",
      "parentUuid": "70e6dcea_964c754c",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ea7d77f4_559ec0e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2020-11-24T10:00:45Z",
      "side": 1,
      "message": "Every time we call UpdateLoadStartTime, GC is delayed by 7 seconds unless Chrome calls setRAILMode(Response|Animation|Idle). Since Chrome did not call setRAILMode(Load) in the first place on window.location changes (otherwise there would be no need for this CL), this means it is not going to call setRAILMode to move away from the load mode.\n\nSo I think this CL effectively disables GC for the benchmark and that\u0027s why we see perf improvement. I guess the memory usage of the benchmark is not measured, so we don\u0027t see that part of the trade-off. V8 may also force a heavy stop-the-world GC (~100ms pause time) if the memory usage becomes too large and there was no GC for a long time. That would negatively affect latency, which is probably also not measured in the benchmark.\n\nIn other words, the CL is not a clear win and may introduce regressions in other metrics like memory usage and latency. With the new API refactoring, we will move all RAIL management to Chrome. There we would have more information to switch away from the Load mode faster than the ad-hoc timeout of 7 seconds to avoid regressions in other metrics.\n\nConsidering all this, I hope you understand why I am reluctant to land this CL now.",
      "parentUuid": "482c3f17_668b9053",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89500f8d_0cadc759",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2020-11-30T04:02:09Z",
      "side": 1,
      "message": "Thanks Ulan for your explanation. I understood your concern. Let\u0027s wait for new API. Hope not to wait too long :-)",
      "parentUuid": "ea7d77f4_559ec0e9",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad88af83_355c46b5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2021-03-12T09:51:23Z",
      "side": 1,
      "message": "lgtm considering the results of the memory evaluation in https://bugs.chromium.org/p/v8/issues/detail?id\u003d10947#c11\n\nSorry for the delay with crbug.com/1079326.",
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "297c5e84_e88d00ec",
        "filename": "include/v8.h",
        "patchSetId": 2
      },
      "lineNbr": 9293,
      "author": {
        "id": 1002405
      },
      "writtenOn": "2021-03-12T09:51:23Z",
      "side": 1,
      "message": "Nit: Update load start time of the RAIL mode.",
      "range": {
        "startLine": 9293,
        "startChar": 4,
        "endLine": 9293,
        "endChar": 43
      },
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fca2217e_2277836c",
        "filename": "include/v8.h",
        "patchSetId": 2
      },
      "lineNbr": 9293,
      "author": {
        "id": 1148006
      },
      "writtenOn": "2021-03-12T13:40:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "297c5e84_e88d00ec",
      "range": {
        "startLine": 9293,
        "startChar": 4,
        "endLine": 9293,
        "endChar": 43
      },
      "revId": "97639ce868a1a8c77d734a5fd6a082125276c8dd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}