{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1a595afd_e36dcd24",
        "filename": "src/heap/cppgc/marking-verifier.cc",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-01-24T10:52:35Z",
      "side": 1,
      "message": "You could rename IteratePointersUnsafe to IteratePointersUntilMarker, and have it get the marker directly from the stack object instead of passing it in.\n(I suppose then you wouldn\u0027t even need to expose GetStackMarker)",
      "range": {
        "startLine": 66,
        "startChar": 19,
        "endLine": 66,
        "endChar": 40
      },
      "revId": "8e19f6464a428a4325dad3939fbe54cf431971ee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05599a2c_82982b0a",
        "filename": "src/heap/heap.cc",
        "patchSetId": 2
      },
      "lineNbr": 1695,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-01-24T10:52:35Z",
      "side": 1,
      "message": "nit: I think `SetStackMarker` should be cheap. Could we just always call it and drop all the conditions around it?",
      "range": {
        "startLine": 1695,
        "startChar": 7,
        "endLine": 1695,
        "endChar": 44
      },
      "revId": "8e19f6464a428a4325dad3939fbe54cf431971ee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16b628f2_d8026df3",
        "filename": "src/heap/heap.cc",
        "patchSetId": 2
      },
      "lineNbr": 4840,
      "author": {
        "id": 1356087
      },
      "writtenOn": "2023-01-24T10:52:35Z",
      "side": 1,
      "message": "I recall we had issues with the ScanStackMode version before. Specifically, we concluded that for clients we will always need to scan the stack (since there stack state is unknown). So if stack_mode here is kNone, you wouldn\u0027t know whether to pass to the clients kComplete for marking or kTopOfStack for verifying.\nI think we need to have two arguments, one for whether we need to scan all or just from the marker, and one for whether there\u0027s a stack. That way the first argument will be passed as is and the second will be hardcoded to a non-empty stack.",
      "range": {
        "startLine": 4840,
        "startChar": 62,
        "endLine": 4840,
        "endChar": 67
      },
      "revId": "8e19f6464a428a4325dad3939fbe54cf431971ee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}