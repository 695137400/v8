{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1fdf446d_85d54f54",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1313365
      },
      "writtenOn": "2021-03-10T09:02:52Z",
      "side": 1,
      "message": "Could you please have a review?",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba1e8caa_2fe6fbb2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1118373
      },
      "writtenOn": "2021-03-10T09:08:01Z",
      "side": 1,
      "message": "Wouldn\u0027t this simply break the semantics of structured clone for large object graphs?",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19ca3ad0_602fbe80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2021-03-10T09:24:41Z",
      "side": 1,
      "message": "I would expect it to, plus it could easily blow up the size of the serialized graph if there\u0027s a different microbenchmark with a lot of object duplication.\n\nIdentityMap is a hashtable, so I\u0027m surprised its performance has a dependency on its size?",
      "parentUuid": "ba1e8caa_2fe6fbb2",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c2f3c43_d6854efe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1118373
      },
      "writtenOn": "2021-03-10T09:27:57Z",
      "side": 1,
      "message": "I would have expected that, for large object graphs, creating and keeping a Handle for every graph node is going to cause issues. But this CL doesn\u0027t address that issue.",
      "parentUuid": "19ca3ad0_602fbe80",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d953dc28_61f2a992",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2021-03-10T09:31:01Z",
      "side": 1,
      "message": "there\u0027s HandleScopes scattered around the value serializer, and IdentityMap uses raw object ptrs + synchronisation with GC rather than Handles, so I think that particular concern is fine.",
      "parentUuid": "6c2f3c43_d6854efe",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fccd005_ba7872ae",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1118373
      },
      "writtenOn": "2021-03-10T09:41:35Z",
      "side": 1,
      "message": "Might be a bad hash function? The hash function seems to be base::hash. If I\u0027m not reading that wrong, then it just casts the address into an unsigned int, which may not work well for aligned pointers?",
      "parentUuid": "d953dc28_61f2a992",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c50df9f8_46719e70",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1175774
      },
      "writtenOn": "2021-03-10T15:08:14Z",
      "side": 1,
      "message": "in principle this also shouldn\u0027t matter, the unsigned int is hashed with a semi-decent hash function after the cast. Hard to say though. Tao Pan, can you share the benchmark?",
      "parentUuid": "6fccd005_ba7872ae",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e1421747_577e07bf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1313365
      },
      "writtenOn": "2021-03-11T01:29:32Z",
      "side": 1,
      "message": "Thanks for your review comments!",
      "revId": "a933de074be1a6da986c14c4c3e6d660cebd07f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}