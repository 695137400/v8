{
  "comments": [
    {
      "key": {
        "uuid": "f9b5ff02_bbe59118",
        "filename": "src/codegen/compiler.cc",
        "patchSetId": 2
      },
      "lineNbr": 1121,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2020-08-05T11:18:30Z",
      "side": 1,
      "message": "I\u0027m thinking how to make this easier to read.\nHow about reintroducing a GetOptimizedCodeLater helper and then writing:\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nif (mode \u003d\u003d ConcurrencyMode::kConcurrent) {\n  if (GetOptimizedCodeLater(... pass job as unique_ptr ...)) {\n    return BUILTIN_CODE(...);\n  }\n} else {\n  if (GetOptimizedCodeNow(...)) {\n    InsertCode...\n    return ...\n  }\n}\n\nif (isolate-\u003ehas_pending_exception()) isolate-\u003eclear_pending_exception();\nreturn {};\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nGetOptimizedCode* would be responsible for setting up the handle scopes. None of them would be responsible for clearing exception.",
      "revId": "7e53947709eb3c1c2795271519f1f157578fe68f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb6832b1_8b7810a8",
        "filename": "src/codegen/compiler.cc",
        "patchSetId": 2
      },
      "lineNbr": 1121,
      "author": {
        "id": 1327869
      },
      "writtenOn": "2020-08-05T12:40:04Z",
      "side": 1,
      "message": "I don\u0027t think we can do that since, for example, InsertCodeIntoCompilationCache creates handles. With your proposal, this method would be outside of the CanonicalHandleScope.",
      "parentUuid": "f9b5ff02_bbe59118",
      "revId": "7e53947709eb3c1c2795271519f1f157578fe68f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "745ff5f1_aacdec04",
        "filename": "src/codegen/compiler.cc",
        "patchSetId": 2
      },
      "lineNbr": 1121,
      "author": {
        "id": 1119597
      },
      "writtenOn": "2020-08-06T06:56:00Z",
      "side": 1,
      "message": "That should be fine, these handles don\u0027t need to be canonical.",
      "parentUuid": "eb6832b1_8b7810a8",
      "revId": "7e53947709eb3c1c2795271519f1f157578fe68f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}